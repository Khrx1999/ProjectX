<!-- Test Summary: KPI Metrics -->
<div class="bg-gradient-to-b from-gray-900 to-black rounded-xl border border-gray-800 p-8 shadow-xl shadow-black/20 mb-8 backdrop-blur-sm hover:shadow-2xl transition-all duration-500">
  <div class="flex justify-between mb-8 items-center border-b border-gray-700 pb-6">
    <div>
      <div class="flex items-center space-x-3">
        <div class="bg-gradient-to-r from-red-600 to-red-700 p-2 rounded-lg shadow-lg">
          <i class="ri-dashboard-3-line text-white text-xl"></i>
        </div>
        <div>
          <h2 class="text-2xl font-bold text-white tracking-tight">Test Summary</h2>
          <p class="text-sm text-gray-400 mt-1">Enterprise Quality Assurance Dashboard</p>
        </div>
      </div>
    </div>
    <div class="flex space-x-3">
      <button class="text-sm bg-gray-800 hover:bg-gray-700 border border-gray-700 text-gray-200 px-4 py-2 rounded-lg transition-colors font-medium shadow-sm flex items-center">
        <i class="ri-download-cloud-line mr-1.5"></i> Export
      </button>
      <div class="dropdown">
        <button type="button" class="dropdown-toggle text-gray-200 hover:bg-gray-700 bg-gray-800 border border-gray-700 p-2 rounded-lg transition-colors shadow-sm">
          <i class="ri-more-2-fill"></i>
        </button>
        <ul class="dropdown-menu hidden py-2 rounded-lg bg-gray-800 border border-gray-700 w-44 shadow-lg">
          <li><a href="#" class="flex items-center text-sm py-2 px-4 text-gray-300 hover:text-red-400 hover:bg-gray-700"><i class="ri-file-pdf-line mr-2"></i> Export PDF</a></li>
          <li><a href="#" class="flex items-center text-sm py-2 px-4 text-gray-300 hover:text-red-400 hover:bg-gray-700"><i class="ri-mail-send-line mr-2"></i> Email Report</a></li>
          <li><a href="#" class="flex items-center text-sm py-2 px-4 text-gray-300 hover:text-red-400 hover:bg-gray-700"><i class="ri-printer-line mr-2"></i> Print</a></li>
        </ul>
      </div>
    </div>
  </div>
  
  <!-- Test Cases Stats Cards -->
  <div class="grid grid-cols-2 md:grid-cols-6 gap-6 mb-8">
    <!-- Total Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-purple-700 to-blue-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">Total</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-blue-500/30">
            <i class="ri-file-list-3-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-blue-400 count-animation neon-text" data-count="{{TOTAL_TEST_CASES}}">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Current Status & Progress</div>
        </div>
      </div>
    </div>

    <!-- Passed Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-emerald-500 to-green-500 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">Passed</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-green-500 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-green-500/30">
            <i class="ri-checkbox-circle-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-green-400 count-animation neon-text" data-count="{{PASSED_TEST_CASES}}">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Test Cases Passed</div>
        </div>
      </div>
    </div>

    <!-- Failed Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-red-700 to-pink-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">Failed</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-red-600 to-pink-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-red-500/30">
            <i class="ri-close-circle-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-red-400 to-pink-400 count-animation neon-text" data-count="{{FAILED_TEST_CASES}}">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Failed Test Cases</div>
        </div>
      </div>
    </div>

    <!-- Blocked Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-amber-700 to-orange-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">Blocked</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-amber-600 to-orange-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-orange-500/30">
            <i class="ri-stop-circle-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-amber-400 to-orange-400 count-animation neon-text" data-count="{{BLOCKED_TEST_CASES}}">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Blocked Test Cases</div>
        </div>
      </div>
    </div>

    <!-- In Progress Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-blue-700 to-indigo-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">In Progress</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-indigo-500/30">
            <i class="ri-time-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-indigo-400 count-animation neon-text" data-count="{{IN_PROGRESS_TEST_CASES}}">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Tests In Progress</div>
        </div>
      </div>
    </div>

    <!-- Not Started Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-gray-600 to-gray-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">Not Started</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gray-600 to-gray-700 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-gray-500/30">
            <i class="ri-hourglass-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-400 to-gray-500 count-animation neon-text" data-count="{{NOT_STARTED_TEST_CASES}}">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Pending Test Cases</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Overall Completion Progress -->
  {% include "partials/summary_overall_progress.html" %}
    
    <!-- Key Metrics -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Test Coverage Card -->
    {% include "partials/summary_test_coverage.html" %}

    <!-- Defect Density Card -->
    {% include "partials/summary_defect_density.html" %}
    
    <!-- Time to Fix Card -->
    {% include "partials/summary_time_to_fix.html" %}
    </div>
</div>
    <!-- JavaScript for Cards -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Animation for numbers
        document.querySelectorAll('.count-animation').forEach(element => {
          const countTo = parseInt(element.getAttribute('data-count'));
          let count = 0;
          const interval = setInterval(() => {
            const increment = Math.ceil(countTo / 20);
            count = Math.min(count + increment, countTo);
            element.textContent = count.toFixed(countTo % 1 > 0 ? 1 : 0);
            if (count >= countTo) {
              clearInterval(interval);
            }
          }, 50);
        });
        
        // Initialize progress bars
        document.querySelectorAll('[data-progress]').forEach(bar => {
          const percentage = bar.getAttribute('data-progress');
          setTimeout(() => {
            bar.style.width = percentage + '%';
          }, 300);
        });
        
        // Dropdown toggle functionality
        document.querySelectorAll('.dropdown-toggle').forEach(button => {
          button.addEventListener('click', function() {
            const dropdownMenu = this.nextElementSibling;
            if (dropdownMenu.classList.contains('hidden')) {
              document.querySelectorAll('.dropdown-menu').forEach(menu => {
                menu.classList.add('hidden');
              });
              dropdownMenu.classList.remove('hidden');
            } else {
              dropdownMenu.classList.add('hidden');
            }
          });
        });
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
          if (!event.target.closest('.dropdown')) {
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
              menu.classList.add('hidden');
            });
          }
        });
        
        // Add shimmer animation
        if (!document.querySelector('#shimmer-animation')) {
          const style = document.createElement('style');
          style.id = 'shimmer-animation';
          style.textContent = `
            @keyframes shimmer {
              0% {
                transform: translateX(-100%);
              }
              100% {
                transform: translateX(100%);
              }
            }
            .animate-shimmer {
              animation: shimmer 2s infinite;
            }
          `;
          document.head.appendChild(style);
        }
      });
    </script>
    <!-- End: Test Summary -->