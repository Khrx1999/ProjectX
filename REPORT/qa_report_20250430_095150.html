<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>QA Dashboard -  v</title>

  <!-- Fonts & Icons -->
  <link rel="preconnect" href="https://fonts.bunny.net">
  <link href="https://fonts.bunny.net/css?family=figtree:400,500,600&display=swap" rel="stylesheet" />
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
  <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
  
  <!-- Alpine.js -->
  <script defer src="https://unpkg.com/@alpinejs/focus@3.x.x/dist/cdn.min.js"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  
  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Custom Style -->
  <style>
<!-- Include CSS -->
<link rel="stylesheet" href="assets/css/styles.css">

<!-- Include Tailwind CSS -->
<script src="https://cdn.tailwindcss.com"></script>

<!-- Configure Tailwind -->
<script>
  tailwind.config = {
    darkMode: 'class',
    theme: {
      extend: {
        fontFamily: {
          sans: ['Inter', 'sans-serif'],
        },
        colors: {
          primary: {
            50: '#f9fafb',
            100: '#f3f4f6',
            200: '#e5e7eb',
            300: '#d1d5db',
            400: '#9ca3af',
            500: '#6b7280',
            600: '#4b5563',
            700: '#374151',
            800: '#1f2937',
            900: '#111827',
          },
        }
      }
    }
  }
</script>

@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap');

body {
  font-family: 'Inter', sans-serif;
}

.sidebar-menu {
  background-color: #f8f4f3;
}

.severity-critical {
  color: #fff;
  background-color: #dc2626;
  padding: 0.2rem 0.5rem;
  border-radius: 0.25rem;
  font-weight: 600;
}

.severity-high {
  color: #fff;
  background-color: #f97316;
  padding: 0.2rem 0.5rem;
  border-radius: 0.25rem;
  font-weight: 600;
}

.severity-medium {
  color: #000;
  background-color: #facc15;
  padding: 0.2rem 0.5rem;
  border-radius: 0.25rem;
  font-weight: 600;
}

.severity-low {
  color: #fff;
  background-color: #2563eb;
  padding: 0.2rem 0.5rem;
  border-radius: 0.25rem;
  font-weight: 600;
}

/* Animation effects */
@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.shimmer {
  animation: shimmer 2s infinite linear;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.animate-pulse {
  animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.menu-item a:hover, .menu-item button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.menu-item a, .menu-item button {
  transition: all 0.3s ease;
  position: relative;
}

.menu-item a::after, .menu-item button::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: calc(50% - 8px);
  width: 16px;
  height: 16px;
  background-color: transparent;
  border-radius: 50%;
  opacity: 0;
  transform: translateY(-10px);
  transition: all 0.3s ease;
}

.menu-item:hover a::after, .menu-item:hover button::after {
  opacity: 0.3;
  transform: translateY(0);
}

.menu-item.active a::after, .menu-item.active button::after {
  opacity: 0.6;
  transform: translateY(0);
  background-color: #ef4444;
}

.submenu-item {
  position: relative;
  transition: all 0.3s ease;
}

.submenu-item:hover {
  transform: translateX(5px);
}

.submenu-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 3px;
  background: linear-gradient(to bottom, #ef4444, #f87171);
  transform: scaleY(0);
  transform-origin: bottom;
  transition: transform 0.3s ease;
}

.submenu-item:hover::before {
  transform: scaleY(1);
}

@keyframes navGlow {
  0% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
  50% { box-shadow: 0 0 10px rgba(239, 68, 68, 0.3); }
  100% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
}

.menu-item.active a, .menu-item.active button {
  animation: navGlow 2s infinite;
}

.menu-item a .icon-wrapper, .menu-item button .icon-wrapper {
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.menu-item:hover a .icon-wrapper, .menu-item:hover button .icon-wrapper,
.menu-item.active a .icon-wrapper, .menu-item.active button .icon-wrapper {
  transform: scale(1.1) rotate(5deg);
}

/* Active indicator for submenu */
.submenu-item.active {
  background-color: rgba(255, 255, 255, 0.1);
  font-weight: 500;
  color: white;
  padding-left: 20px; 
}

.submenu-item.active::before {
  transform: scaleY(1);
  background: linear-gradient(to bottom, #ef4444, #f87171);
}

/* Smooth page transition */
.page-transition {
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.5s forwards;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Add these new styles */
[x-cloak] { 
  display: none !important; 
}

/* Style for when modal is open - add this class to body when modal opens */
.modal-open {
  overflow: hidden;
}

/* Enhanced backdrop blur and glass effect for modals */
.modal-backdrop {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Glass effect for modal content */
.modal-content {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark .modal-content {
  background: rgba(30, 41, 59, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Add smooth transition for blur effects */
.transition-blur {
  transition: backdrop-filter 0.3s ease-in-out;
}@import url('https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap');

body {
  font-family: 'Inter', sans-serif;
}

.sidebar-menu {
  background-color: #f8f4f3;
}

.severity-critical {
  color: #fff;
  background-color: #dc2626;
  padding: 0.2rem 0.5rem;
  border-radius: 0.25rem;
  font-weight: 600;
}

.severity-high {
  color: #fff;
  background-color: #f97316;
  padding: 0.2rem 0.5rem;
  border-radius: 0.25rem;
  font-weight: 600;
}

.severity-medium {
  color: #000;
  background-color: #facc15;
  padding: 0.2rem 0.5rem;
  border-radius: 0.25rem;
  font-weight: 600;
}

.severity-low {
  color: #fff;
  background-color: #2563eb;
  padding: 0.2rem 0.5rem;
  border-radius: 0.25rem;
  font-weight: 600;
}

/* Animation effects */
@keyframes shimmer {
  0% { transform: translateX(-100%); }
  100% { transform: translateX(100%); }
}

.shimmer {
  animation: shimmer 2s infinite linear;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.6; }
}

.animate-pulse {
  animation: pulse 1.5s cubic-bezier(0.4, 0, 0.6, 1) infinite;
}

.menu-item a:hover, .menu-item button:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
}

.menu-item a, .menu-item button {
  transition: all 0.3s ease;
  position: relative;
}

.menu-item a::after, .menu-item button::after {
  content: '';
  position: absolute;
  bottom: -4px;
  left: calc(50% - 8px);
  width: 16px;
  height: 16px;
  background-color: transparent;
  border-radius: 50%;
  opacity: 0;
  transform: translateY(-10px);
  transition: all 0.3s ease;
}

.menu-item:hover a::after, .menu-item:hover button::after {
  opacity: 0.3;
  transform: translateY(0);
}

.menu-item.active a::after, .menu-item.active button::after {
  opacity: 0.6;
  transform: translateY(0);
  background-color: #ef4444;
}

.submenu-item {
  position: relative;
  transition: all 0.3s ease;
}

.submenu-item:hover {
  transform: translateX(5px);
}

.submenu-item::before {
  content: '';
  position: absolute;
  left: 0;
  top: 0;
  height: 100%;
  width: 3px;
  background: linear-gradient(to bottom, #ef4444, #f87171);
  transform: scaleY(0);
  transform-origin: bottom;
  transition: transform 0.3s ease;
}

.submenu-item:hover::before {
  transform: scaleY(1);
}

@keyframes navGlow {
  0% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
  50% { box-shadow: 0 0 10px rgba(239, 68, 68, 0.3); }
  100% { box-shadow: 0 0 0 rgba(239, 68, 68, 0); }
}

.menu-item.active a, .menu-item.active button {
  animation: navGlow 2s infinite;
}

.menu-item a .icon-wrapper, .menu-item button .icon-wrapper {
  transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
}

.menu-item:hover a .icon-wrapper, .menu-item:hover button .icon-wrapper,
.menu-item.active a .icon-wrapper, .menu-item.active button .icon-wrapper {
  transform: scale(1.1) rotate(5deg);
}

/* Active indicator for submenu */
.submenu-item.active {
  background-color: rgba(255, 255, 255, 0.1);
  font-weight: 500;
  color: white;
  padding-left: 20px; 
}

.submenu-item.active::before {
  transform: scaleY(1);
  background: linear-gradient(to bottom, #ef4444, #f87171);
}

/* Smooth page transition */
.page-transition {
  opacity: 0;
  transform: translateY(20px);
  animation: fadeInUp 0.5s forwards;
}

@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Add these new styles */
[x-cloak] { 
  display: none !important; 
}

/* Style for when modal is open - add this class to body when modal opens */
.modal-open {
  overflow: hidden;
}

/* Enhanced backdrop blur and glass effect for modals */
.modal-backdrop {
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
}

/* Glass effect for modal content */
.modal-content {
  background: rgba(255, 255, 255, 0.9);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(255, 255, 255, 0.2);
}

.dark .modal-content {
  background: rgba(30, 41, 59, 0.9);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Add smooth transition for blur effects */
.transition-blur {
  transition: backdrop-filter 0.3s ease-in-out;
}

/* Additional styles for enhanced UI */
.card {
  transition: transform 0.2s ease, box-shadow 0.2s ease;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
}

.hover-scale {
  transition: transform 0.2s ease;
}

.hover-scale:hover {
  transform: scale(1.05);
}

/* Progress bar animations */
.progress-bar {
  transition: width 1.5s cubic-bezier(0.19, 1, 0.22, 1);
}

/* Chart tooltip styles */
.chart-tooltip {
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 8px 12px;
  border-radius: 6px;
  font-size: 12px;
  z-index: 1000;
  pointer-events: none;
  max-width: 250px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
  border: 1px solid rgba(255, 255, 255, 0.1);
}

/* Dark Theme Variables */
:root {
  /* สีพื้นหลังหลัก */
  --color-bg1: rgb(26, 9, 51);        /* สีม่วงดำ */
  --color-bg2: rgb(2, 9, 34);         /* สีน้ำเงินดำ */
  
  /* สีสำหรับกราดิเอนต์หลัก */
  --color-spot1: 130, 50, 220;        /* สีม่วงสว่าง */
  --color-spot2: 50, 120, 255;        /* สีฟ้าสว่าง */
  --color-spot3: 220, 60, 180;        /* สีชมพูม่วง */
  --color-spot4: 30, 80, 180;         /* สีน้ำเงิน */
  
  /* สีสำหรับฟองสบู่ */
  --bubble1: 100, 210, 255;           /* สีฟ้าสว่าง */
  --bubble2: 255, 100, 200;           /* สีชมพูสว่าง */
  --bubble3: 130, 160, 255;           /* สีฟ้าม่วงอ่อน */
  --bubble4: 255, 170, 100;           /* สีส้มอ่อน */
  
  --circle-size: 80%;
  --blending: screen;                 /* เปลี่ยนเป็น screen เพื่อให้ blend สวยงามในโทนมืด */
}

/* Animation Keyframes */
@keyframes moveInCircle {
  0% { transform: rotate(0deg); }
  50% { transform: rotate(180deg); }
  100% { transform: rotate(360deg); }
}

@keyframes moveVertical {
  0% { transform: translateY(-50%); }
  50% { transform: translateY(50%); }
  100% { transform: translateY(-50%); }
}

@keyframes moveHorizontal {
  0% { transform: translateX(-50%) translateY(-10%); }
  50% { transform: translateX(50%) translateY(10%); }
  100% { transform: translateX(-50%) translateY(-10%); }
}

@keyframes floatBubble {
  0% { transform: translate(0, 0) scale(1); }
  33% { transform: translate(10px, -30px) scale(1.05); }
  66% { transform: translate(-20px, -15px) scale(0.95); }
  100% { transform: translate(0, 0) scale(1); }
}

@keyframes floatBubble2 {
  0% { transform: translate(0, 0) scale(0.8); }
  33% { transform: translate(-15px, -20px) scale(0.9); }
  66% { transform: translate(15px, -40px) scale(0.75); }
  100% { transform: translate(0, 0) scale(0.8); }
}

/* Animation for color changing */
@keyframes gradientShift {
  0% {
    background-position: 0% 50%;
    filter: hue-rotate(0deg);
  }
  50% {
    background-position: 100% 50%;
    filter: hue-rotate(15deg);
  }
  100% {
    background-position: 0% 50%;
    filter: hue-rotate(0deg);
  }
}

@keyframes colorPulse {
  0% { opacity: 0.4; }
  50% { opacity: 0.7; }
  100% { opacity: 0.4; }
}

/* Dark Theme Base Styles */
body {
  background: transparent !important;
  position: relative;
  color: #e0e0e0;
}

/* Gradient Background */
.gradient-bg {
  position: fixed;
  width: 100vw;
  height: 100vh;
  top: 0;
  left: 0;
  overflow: hidden;
  background: radial-gradient(ellipse at center, rgba(15, 8, 40, 1) 0%, rgba(2, 4, 20, 1) 100%);
  z-index: -1;
}

/* Animated Color Spots */
.color-spots {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  z-index: -1;
}

.spot {
  position: absolute;
  border-radius: 50%;
  filter: blur(80px);
  mix-blend-mode: screen;
  opacity: 0.6;
  animation: colorPulse 8s infinite alternate;
}

.spot1 {
  width: 600px;
  height: 600px;
  background: radial-gradient(circle at center, rgba(var(--color-spot1), 0.8) 0%, rgba(var(--color-spot1), 0) 70%);
  top: 10%;
  left: 20%;
  animation: moveInCircle 40s infinite alternate, colorPulse 8s infinite alternate;
}

.spot2 {
  width: 500px;
  height: 500px;
  background: radial-gradient(circle at center, rgba(var(--color-spot2), 0.8) 0%, rgba(var(--color-spot2), 0) 70%);
  bottom: 10%;
  right: 20%;
  animation: moveInCircle 30s infinite alternate-reverse, colorPulse 12s infinite alternate-reverse;
}

.spot3 {
  width: 400px;
  height: 400px;
  background: radial-gradient(circle at center, rgba(var(--color-spot3), 0.8) 0%, rgba(var(--color-spot3), 0) 70%);
  top: 40%;
  right: 30%;
  animation: moveVertical 20s infinite, colorPulse 10s infinite alternate;
}

.spot4 {
  width: 550px;
  height: 550px;
  background: radial-gradient(circle at center, rgba(var(--color-spot4), 0.8) 0%, rgba(var(--color-spot4), 0) 70%);
  bottom: 30%;
  left: 30%;
  animation: moveHorizontal 35s infinite, colorPulse 14s infinite alternate-reverse;
}

/* SVG Filter */
.gradient-bg svg {
  position: fixed;
  top: 0;
  left: 0;
  width: 0;
  height: 0;
}

/* Gradients Container */
.gradients-container {
  filter: url(#goo) blur(40px);
  width: 100%;
  height: 100%;
}

/* Gradient Elements */
.g1, .g2, .g3, .g4, .g5 {
  position: absolute;
  mix-blend-mode: var(--blending);
  opacity: 0.7;
}

.g1 {
  background: radial-gradient(circle at center, rgba(var(--color1), 0.5) 0, rgba(var(--color1), 0) 50%) no-repeat;
  width: var(--circle-size);
  height: var(--circle-size);
  top: calc(50% - var(--circle-size) / 2);
  left: calc(50% - var(--circle-size) / 2);
  transform-origin: center center;
  animation: moveVertical 30s ease infinite;
}

.g2 {
  background: radial-gradient(circle at center, rgba(var(--color2), 0.5) 0, rgba(var(--color2), 0) 50%) no-repeat;
  width: var(--circle-size);
  height: var(--circle-size);
  top: calc(50% - var(--circle-size) / 2);
  left: calc(50% - var(--circle-size) / 2);
  transform-origin: calc(50% - 400px);
  animation: moveInCircle 20s reverse infinite;
}

.g3 {
  background: radial-gradient(circle at center, rgba(var(--color3), 0.5) 0, rgba(var(--color3), 0) 50%) no-repeat;
  width: var(--circle-size);
  height: var(--circle-size);
  top: calc(50% - var(--circle-size) / 2 + 200px);
  left: calc(50% - var(--circle-size) / 2 - 500px);
  transform-origin: calc(50% + 400px);
  animation: moveInCircle 40s linear infinite;
}

.g4 {
  background: radial-gradient(circle at center, rgba(var(--color4), 0.5) 0, rgba(var(--color4), 0) 50%) no-repeat;
  width: var(--circle-size);
  height: var(--circle-size);
  top: calc(50% - var(--circle-size) / 2);
  left: calc(50% - var(--circle-size) / 2);
  transform-origin: calc(50% - 200px);
  animation: moveHorizontal 40s ease infinite;
  opacity: 0.5;
}

.g5 {
  background: radial-gradient(circle at center, rgba(var(--color5), 0.5) 0, rgba(var(--color5), 0) 50%) no-repeat;
  width: calc(var(--circle-size) * 2);
  height: calc(var(--circle-size) * 2);
  top: calc(50% - var(--circle-size));
  left: calc(50% - var(--circle-size));
  transform-origin: calc(50% - 800px) calc(50% + 200px);
  animation: moveInCircle 20s ease infinite;
}

.interactive {
  position: absolute;
  background: radial-gradient(circle at center, rgba(var(--color-interactive), 0.5) 0, rgba(var(--color-interactive), 0) 50%) no-repeat;
  mix-blend-mode: var(--blending);
  width: 100%;
  height: 100%;
  top: -50%;
  left: -50%;
  opacity: 0.5;
}

/* Bubbles */
.bubbles-container {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  overflow: hidden;
  pointer-events: none;
  z-index: -1;
}

.bubble {
  position: absolute;
  border-radius: 50%;
  box-shadow: inset 0 0 20px rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(5px);
  background: rgba(255, 255, 255, 0.05);
  border: 1px solid rgba(255, 255, 255, 0.1);
  transition: background 0.5s ease;
}

.bubble::before {
  content: '';
  position: absolute;
  top: 10%;
  left: 15%;
  width: 20%;
  height: 20%;
  background: rgba(255, 255, 255, 0.2);
  border-radius: 50%;
}

.bubble1 {
  width: 80px;
  height: 80px;
  background: radial-gradient(circle at 70% 30%, rgba(var(--bubble1), 0.15) 0%, rgba(20, 20, 40, 0.05) 60%);
  left: 15%;
  top: 20%;
  animation: floatBubble 15s ease-in-out infinite;
}

.bubble2 {
  width: 120px;
  height: 120px;
  background: radial-gradient(circle at 70% 30%, rgba(var(--bubble2), 0.15) 0%, rgba(20, 20, 40, 0.05) 70%);
  right: 20%;
  top: 30%;
  animation: floatBubble2 18s ease-in-out infinite;
}

.bubble3 {
  width: 60px;
  height: 60px;
  background: radial-gradient(circle at 70% 30%, rgba(var(--bubble3), 0.15) 0%, rgba(20, 20, 40, 0.05) 60%);
  left: 30%;
  bottom: 30%;
  animation: floatBubble 12s ease-in-out infinite 2s;
}

.bubble4 {
  width: 100px;
  height: 100px;
  background: radial-gradient(circle at 70% 30%, rgba(var(--bubble4), 0.15) 0%, rgba(20, 20, 40, 0.05) 60%);
  right: 25%;
  bottom: 20%;
  animation: floatBubble2 20s ease-in-out infinite 1s;
}

.bubble5 {
  width: 40px;
  height: 40px;
  background: radial-gradient(circle at 70% 30%, rgba(var(--bubble1), 0.15) 0%, rgba(20, 20, 40, 0.05) 60%);
  left: 50%;
  top: 15%;
  animation: floatBubble 16s ease-in-out infinite 3s;
}

.bubble6 {
  width: 70px;
  height: 70px;
  background: radial-gradient(circle at 70% 30%, rgba(var(--bubble3), 0.15) 0%, rgba(20, 20, 40, 0.05) 70%);
  left: 75%;
  top: 50%;
  animation: floatBubble2 22s ease-in-out infinite;
}

.bubble:hover {
  background: rgba(255, 255, 255, 0.1);
}

/* Main Content */
main {
  position: relative;
  background: rgba(25, 30, 45, 0.65);
  backdrop-filter: blur(5px);
  color: #e0e0e0;
}

/* Container and Sidebar */
.container, .sidebar {
  position: relative;
  z-index: 1;
}

/* Text Colors */
h1, h2, h3, h4, h5, h6 {
  color: #f0f0f0;
}

p, li, td, th {
  color: #d0d0d0;
}

/* Glow Effect */
.glow-effect {
  text-shadow: 0 0 8px rgba(66, 153, 225, 0.6);
}   </style>

  <!-- Additional Scripts -->
  <script>
// สำหรับตรวจจับ Dark Mode
if (localStorage.getItem('darkMode') === 'true' ||
    (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
  document.documentElement.classList.add('dark');
}

// กำหนดค่า tailwind theme
tailwind.config = {
  darkMode: 'class',
  theme: {
    extend: {
      fontFamily: {
        'inter': ['Inter', 'sans-serif'],
      },
      colors: {
        'primary': '#3b82f6',
        'secondary': '#9333ea',
      }
    }
  }
}

// Add Chart.js
document.write('<script src="https://cdn.jsdelivr.net/npm/chart.js@3.9.1/dist/chart.min.js"><\/script>');

// Utility Functions
function formatNumber(num, decimals = 0) {
  return parseFloat(num).toLocaleString('th-TH', {
    minimumFractionDigits: decimals,
    maximumFractionDigits: decimals
  });
}

function formatThaiDate(date) {
  if (!date) return '';
  
  const options = { 
    year: 'numeric', 
    month: 'short', 
    day: 'numeric',
    hour: '2-digit',
    minute: '2-digit'
  };
  
  return new Date(date).toLocaleDateString('th-TH', options);
}

// Add print functionality
function printReport() {
  window.print();
}

// Initialize theme
const userPreference = localStorage.getItem('darkMode') === 'true';
const systemPreference = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
const darkModeEnabled = userPreference ?? systemPreference;

// Initial theme setup
if (darkModeEnabled) {
  document.documentElement.classList.add('dark');
} else {
  document.documentElement.classList.remove('dark');
}

// Function to toggle theme
function toggleDarkMode() {
  const isDark = document.documentElement.classList.toggle('dark');
  localStorage.setItem('darkMode', isDark);
}

// For tooltips - using Tippy.js via CDN
document.write('<script src="https://unpkg.com/@popperjs/core@2.11.6/dist/umd/popper.min.js"><\/script>');
document.write('<script src="https://unpkg.com/tippy.js@6.3.7/dist/tippy-bundle.umd.min.js"><\/script>');

// Add ApexCharts for more advanced charts
document.write('<script src="https://cdn.jsdelivr.net/npm/apexcharts"><\/script>');   </script>
</head>
<body class="text-gray-300 font-inter">
<!-- Gradient Background -->
<div class="gradient-bg">
  <!-- Animated color spots -->
  <div class="color-spots">
    <div class="spot spot1"></div>
    <div class="spot spot2"></div>
    <div class="spot spot3"></div>
    <div class="spot spot4"></div>
  </div>
  
  <svg xmlns="http://www.w3.org/2000/svg">
    <defs>
      <filter id="goo">
        <feGaussianBlur in="SourceGraphic" stdDeviation="10" result="blur" />
        <feColorMatrix in="blur" mode="matrix" values="1 0 0 0 0  0 1 0 0 0  0 0 1 0 0  0 0 0 18 -8" result="goo" />
        <feBlend in="SourceGraphic" in2="goo" />
      </filter>
    </defs>
  </svg>
  <div class="gradients-container">
    <div class="g1"></div>
    <div class="g2"></div>
    <div class="g3"></div>
    <div class="g4"></div>
    <div class="g5"></div>
    <div class="interactive"></div>
  </div>
</div>

<!-- Bubbles Animation -->
<div class="bubbles-container">
  <div class="bubble bubble1"></div>
  <div class="bubble bubble2"></div>
  <div class="bubble bubble3"></div>
  <div class="bubble bubble4"></div>
  <div class="bubble bubble5"></div>
  <div class="bubble bubble6"></div>
</div> 
  <main id="mainContent" class="w-full min-h-screen transition-all duration-300 main">


    <!-- Content Section -->
    <div class="container mx-auto py-6">

      <!-- Test Summary -->
<!-- Test Summary: KPI Metrics -->
<div class="bg-gradient-to-b from-gray-900 to-black rounded-xl border border-gray-800 p-8 shadow-xl shadow-black/20 mb-8 backdrop-blur-sm hover:shadow-2xl transition-all duration-500">
  <div class="flex justify-between mb-8 items-center border-b border-gray-700 pb-6">
    <div>
      <div class="flex items-center space-x-3">
        <div class="bg-gradient-to-r from-red-600 to-red-700 p-2 rounded-lg shadow-lg">
          <i class="ri-dashboard-3-line text-white text-xl"></i>
        </div>
        <div>
          <h2 class="text-2xl font-bold text-white tracking-tight">Test Summary</h2>
          <p class="text-sm text-gray-400 mt-1">Enterprise Quality Assurance Dashboard</p>
        </div>
      </div>
    </div>
    <div class="flex space-x-3">
      <button class="text-sm bg-gray-800 hover:bg-gray-700 border border-gray-700 text-gray-200 px-4 py-2 rounded-lg transition-colors font-medium shadow-sm flex items-center">
        <i class="ri-download-cloud-line mr-1.5"></i> Export
      </button>
      <div class="dropdown">
        <button type="button" class="dropdown-toggle text-gray-200 hover:bg-gray-700 bg-gray-800 border border-gray-700 p-2 rounded-lg transition-colors shadow-sm">
          <i class="ri-more-2-fill"></i>
        </button>
        <ul class="dropdown-menu hidden py-2 rounded-lg bg-gray-800 border border-gray-700 w-44 shadow-lg">
          <li><a href="#" class="flex items-center text-sm py-2 px-4 text-gray-300 hover:text-red-400 hover:bg-gray-700"><i class="ri-file-pdf-line mr-2"></i> Export PDF</a></li>
          <li><a href="#" class="flex items-center text-sm py-2 px-4 text-gray-300 hover:text-red-400 hover:bg-gray-700"><i class="ri-mail-send-line mr-2"></i> Email Report</a></li>
          <li><a href="#" class="flex items-center text-sm py-2 px-4 text-gray-300 hover:text-red-400 hover:bg-gray-700"><i class="ri-printer-line mr-2"></i> Print</a></li>
        </ul>
      </div>
    </div>
  </div>
  
  <!-- Test Cases Stats Cards -->
  <div class="grid grid-cols-2 md:grid-cols-6 gap-6 mb-8">
    <!-- Total Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-purple-700 to-blue-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">Total</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-purple-600 to-blue-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-blue-500/30">
            <i class="ri-file-list-3-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-purple-400 to-blue-400 count-animation neon-text" data-count="484">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Current Status & Progress</div>
        </div>
      </div>
    </div>

    <!-- Passed Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-emerald-500 to-green-500 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">Passed</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-emerald-500 to-green-500 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-green-500/30">
            <i class="ri-checkbox-circle-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-emerald-400 to-green-400 count-animation neon-text" data-count="326">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Test Cases Passed</div>
        </div>
      </div>
    </div>

    <!-- Failed Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-red-700 to-pink-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">Failed</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-red-600 to-pink-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-red-500/30">
            <i class="ri-close-circle-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-red-400 to-pink-400 count-animation neon-text" data-count="19">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Failed Test Cases</div>
        </div>
      </div>
    </div>

    <!-- Blocked Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-amber-700 to-orange-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">Blocked</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-amber-600 to-orange-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-orange-500/30">
            <i class="ri-stop-circle-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-amber-400 to-orange-400 count-animation neon-text" data-count="0">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Blocked Test Cases</div>
        </div>
      </div>
    </div>

    <!-- In Progress Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-blue-700 to-indigo-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">In Progress</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-indigo-500/30">
            <i class="ri-time-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-indigo-400 count-animation neon-text" data-count="20">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Tests In Progress</div>
        </div>
      </div>
    </div>

    <!-- Not Started Card -->
    <div class="relative group transform transition-all duration-300 hover:-translate-y-1">
      <!-- Glow Effect -->
      <div class="absolute -inset-2.5 bg-gradient-to-r from-gray-600 to-gray-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
      <!-- Main Card -->
      <div class="relative bg-gray-900 rounded-xl p-5 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
        <div class="flex items-center mb-2 justify-between">
          <span class="text-sm font-medium text-gray-400">Not Started</span>
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-gray-600 to-gray-700 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-gray-500/30">
            <i class="ri-hourglass-line text-white text-xl"></i>
          </div>
        </div>
        <div class="mt-3">
          <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-gray-400 to-gray-500 count-animation neon-text" data-count="80">0</div>
          <div class="text-xs text-gray-400 mt-1.5">Pending Test Cases</div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- Overall Completion Progress -->
<!-- Sprint Progress Dashboard - Enterprise Edition -->
<div class="bg-gradient-to-b from-slate-900 via-gray-900 to-black rounded-2xl p-6 shadow-2xl border border-gray-800/30 backdrop-blur-sm transition-all duration-500 relative overflow-hidden mb-8 font-inter">
  <!-- Abstract Background Elements - Improved Glow Effects -->
  <div class="absolute top-0 right-0 w-96 h-96 bg-blue-500/5 rounded-full blur-3xl -translate-y-1/2 translate-x-1/3 z-0 animate-pulse-slow"></div>
  <div class="absolute bottom-0 left-0 w-96 h-96 bg-indigo-500/5 rounded-full blur-3xl translate-y-1/2 -translate-x-1/3 z-0 animate-pulse-slow"></div>
  <div class="absolute top-1/2 left-1/3 w-64 h-64 bg-purple-500/5 rounded-full blur-3xl -translate-y-1/2 z-0 animate-pulse-slow-delayed"></div>
  
  <!-- Subtle Grid Pattern Overlay -->
  <div class="absolute inset-0 bg-grid-pattern opacity-5 z-0"></div>

  <!-- Dashboard Header Section - Modernized with Better Typography -->
  <div class="flex justify-between items-start mb-8 z-10 relative">
    <div class="flex items-center">
      <div class="flex-shrink-0">
        <div class="w-16 h-16 rounded-2xl bg-gradient-to-br from-blue-600 to-indigo-700 flex items-center justify-center shadow-lg relative overflow-hidden group border border-blue-500/20">
          <div class="absolute inset-0 bg-blue-400/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
          <i class="ri-dashboard-3-line text-white text-2xl"></i>
        </div>
      </div>
      <div class="ml-5">
        <h2 class="text-3xl font-extrabold text-white tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-white to-gray-300">Sprint Progress</h2>
        <div class="flex items-center mt-1.5 gap-3">
          <p class="text-sm text-gray-400 font-medium">Enterprise Analytics Dashboard</p>
          <div class="flex items-center space-x-3 ml-2">
            <span class="px-2.5 py-1 text-xs font-medium bg-blue-900/30 text-blue-400 border border-blue-800/50 rounded-full flex items-center">
              <i class="ri-calendar-line mr-1.5 text-blue-300"></i>88 / 88 days
            </span>
            <span class="px-2.5 py-1 text-xs font-medium bg-red-900/30 text-red-400 border-red-800/50 rounded-full flex items-center">
              <i class="ri-error-warning-line mr-1.5"></i>
              Behind Schedule
            </span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Progress Percentage Badge - Enhanced with Animation -->
    <div class="px-5 py-3 bg-gradient-to-r from-blue-900/40 to-indigo-900/40 backdrop-blur-sm border border-blue-800/50 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 hover:-translate-y-1 group">
      <div class="flex items-baseline gap-1.5">
        <div class="text-4xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-indigo-400 group-hover:from-blue-300 group-hover:to-indigo-300 transition-all duration-300 tabular-nums">67.4</div>
        <div class="text-xl font-bold text-blue-400/90">%</div>
      </div>
      <div class="text-xs text-gray-400 mt-0.5 text-right">Overall Completion</div>
    </div>
  </div>

  <!-- Enhanced Progress Bar -->
  <div class="relative w-full h-8 bg-gray-800/80 rounded-xl overflow-hidden mb-2 backdrop-blur-sm border border-gray-700/50 shadow-inner z-10 group">
    <!-- Subtle Track Pattern -->
    <div class="absolute inset-0 bg-grid-pattern-fine opacity-5 z-5"></div>
    
    <!-- Track Markers -->
    <div class="absolute inset-0 flex justify-between px-1 items-center z-10">
      <div class="h-full w-px bg-gray-700/30"></div>
      <div class="h-full w-px bg-gray-700/30"></div>
      <div class="h-full w-px bg-gray-700/30"></div>
      <div class="h-full w-px bg-gray-700/30"></div>
    </div>
    
    <!-- Expected Progress Marker -->
    <div class="absolute h-8 w-0.5 bg-indigo-400/70 right-0 z-30" 
         data-right-pos="100.00000000000001">
      <div class="absolute -top-1 -translate-x-1/2 w-3 h-3 bg-indigo-400 rounded-full shadow-lg shadow-indigo-500/50"></div>
      <div class="absolute -bottom-1 -translate-x-1/2 text-xs text-indigo-400 font-medium w-14 text-center">Target</div>
    </div>
    
    <!-- Progress Fill -->
    <div class="h-full transition-all duration-1000 ease-out relative z-20 group-hover:brightness-110"
         data-width="67.4">
      <!-- Primary Fill -->
      <div class="absolute inset-0 bg-gradient-to-r from-blue-600 to-indigo-600"></div>
      <!-- Shine/Glow Effect -->
      <div class="absolute inset-0 opacity-75 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-shimmer"></div>
      <!-- Edge Glow -->
      <div class="absolute right-0 inset-y-0 w-1 bg-indigo-400/80 blur-[1px]"></div>
      <!-- Completion Percentage Inside Bar -->
      <div class="absolute inset-0 flex items-center px-4">
        <div class="text-xs font-medium text-white/90">67.4% Completed</div>
      </div>
    </div>
  </div>

  <!-- Progress Labels -->
  <div class="flex justify-between text-xs text-gray-500 mb-8 z-10 relative">
    <span>0%</span>
    <span>25%</span>
    <span>50%</span>
    <span>75%</span>
    <span>100%</span>
  </div>

  <!-- Main Dashboard Content -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-8 z-10 relative">
    <!-- Left Column: Sprint Stats and Timeline -->
    <div class="space-y-6 flex flex-col">
      <!-- Sprint Timeline Card - Enhanced Modern Design -->
      <div class="bg-gradient-to-br from-slate-900 to-gray-900 border border-gray-800/40 rounded-xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden relative group h-full flex-grow">
        <!-- Card Background Effects -->
        <div class="absolute -right-10 -bottom-10 w-40 h-40 bg-indigo-500/5 rounded-full blur-xl opacity-70 group-hover:opacity-100 transition-opacity duration-500"></div>
        <div class="absolute inset-0 bg-grid-pattern-fine opacity-5 z-0"></div>
        
        <!-- Card Header with Highlights -->
        <div class="flex items-center mb-5">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-indigo-600 to-blue-700 flex items-center justify-center mr-4 shadow-lg relative border border-indigo-500/20">
            <div class="absolute inset-0 rounded-xl bg-indigo-400/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <i class="ri-calendar-line text-white text-xl"></i>
          </div>
          <div>
            <h3 class="text-lg font-bold text-white tracking-tight">Sprint Timeline</h3>
            <p class="text-xs text-gray-400 mt-0.5">Progress tracking and forecasting</p>
          </div>
          
          <!-- Mini Project Stats -->
          <div class="ml-auto flex space-x-2">
            <div class="bg-gray-800/60 rounded-lg px-2.5 py-1.5 border border-gray-700/40">
              <div class="text-xs text-gray-400">Tests</div>
              <div class="text-sm font-bold text-white flex items-baseline">
                <span>484</span>
                <span class="text-xs text-gray-500 ml-1">total</span>
              </div>
            </div>
            <div class="bg-blue-900/30 rounded-lg px-2.5 py-1.5 border border-blue-900/30">
              <div class="text-xs text-blue-400">Pass</div>
              <div class="text-sm font-bold text-white flex items-baseline">
                <span>326</span>
                <span class="text-green-400 text-xs ml-1">67.0%</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="relative">
          <!-- Enhanced Timeline Bar with Animations -->
          <div class="relative h-3 bg-gray-800/80 rounded-full mb-3 shadow-inner border border-gray-700/40 overflow-hidden group">
            <!-- Subtle Track Pattern -->
            <div class="absolute inset-0 bg-grid-pattern-fine opacity-5 z-0"></div>
            
            <!-- End Marker -->
            <div class="absolute right-0 -translate-y-1/2 -translate-x-1 w-2 h-6 bg-gray-700/80 rounded-full"></div>
            
            <!-- Milestone Markers -->
            <div class="absolute inset-0 flex justify-between px-8 items-center z-10">
              <div class="h-5 w-px bg-gray-700/40"></div>
              <div class="h-5 w-px bg-gray-700/40"></div>
              <div class="h-5 w-px bg-gray-700/40"></div>
            </div>
            
            <!-- Progress Fill with Animation -->
            <div class="absolute h-full left-0 rounded-full bg-gradient-to-r from-indigo-500 to-blue-500 group-hover:brightness-110 transition-all duration-300" 
                data-width="100.0">
              <!-- Shine Effect -->
              <div class="absolute inset-0 opacity-50 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
              
              <!-- Current Position Marker -->
              <div class="absolute right-0 top-1/2 -translate-y-1/2 w-5 h-5 bg-white rounded-full shadow-lg shadow-indigo-500/50 translate-x-1/2 pulse-animation z-20"></div>
            </div>
          </div>

          <!-- Timeline Info Redesigned -->
          <div class="grid grid-cols-3 gap-4 text-xs mt-5">
            <div class="flex flex-col items-start bg-gray-800/50 rounded-lg p-3 border border-gray-800/30 hover:border-indigo-800/30 transition-colors">
              <span class="text-indigo-400 font-medium flex items-center mb-1">
                <i class="ri-calendar-check-line mr-1"></i>
                Start Date
              </span>
              <span class="text-white font-bold">2025-02-01</span>
            </div>
            <div class="flex flex-col items-center bg-gray-800/50 rounded-lg p-3 border border-gray-800/30 hover:border-indigo-800/30 transition-colors">
              <span class="text-indigo-400 font-medium flex items-center mb-1">
                <i class="ri-calendar-line mr-1"></i>
                Duration
              </span>
              <span class="text-white font-bold">88 days</span>
            </div>
            <div class="flex flex-col items-end bg-gray-800/50 rounded-lg p-3 border border-gray-800/30 hover:border-indigo-800/30 transition-colors">
              <span class="text-indigo-400 font-medium flex items-center mb-1">
                <i class="ri-calendar-todo-line mr-1"></i>
                End Date
              </span>
              <span class="text-white font-bold">2025-04-29</span>
            </div>
          </div>
          
          <!-- Estimated Finish Section - Enhanced Visual Appeal -->
          <div class="mt-5 bg-gray-800/60 border border-gray-800/50 rounded-lg p-4 backdrop-blur-sm relative overflow-hidden">
            <div class="absolute -inset-0.5 bg-gradient-to-r from-red-500/10 to-amber-500/10 rounded-lg opacity-40 blur-sm"></div>
            
            <!-- Subtle Direction Indicators -->
              <div class="absolute top-1 right-1 w-24 h-24 bg-red-500/5 rounded-full blur-2xl"></div>
            
            <div class="relative">
              <div class="flex items-center justify-between mb-3">
                <div class="flex items-center text-gray-300 text-sm font-medium">
                  <i class="ri-alert-fill text-red-400 mr-2"></i>
                  Estimated Completion
                </div>
                <div class="w-8 h-8 rounded-full bg-red-900/30 flex items-center justify-center">
                  <i class="ri-calendar-event-fill text-red-400"></i>
                </div>
              </div>
              
              <div class="flex justify-between items-end">
                <div>
                  <div class="text-red-400 text-2xl font-bold flex items-baseline">
                    <span>Day 130</span>
                    <span class="text-sm ml-2 text-gray-400">/ 88</span>
                  </div>
                  <div class="mt-1 text-xs text-red-300 flex items-center">
                    <i class="ri-arrow-right-line mr-1.5"></i>
                      <span>42 days after deadline</span>
                  </div>
                </div>
                
                <div class="flex flex-col items-end">
                  <div class="text-sm text-gray-400">Days Needed</div>
                  <div class="text-lg text-white font-medium">42</div>
                </div>
              </div>
              
              <!-- Mini progress indicator with Animation -->
              <div class="mt-3 w-full h-1.5 bg-gray-800 rounded-full overflow-hidden">
                <div class="h-full bg-gradient-to-r from-red-600 to-amber-500 rounded-full relative" 
                     data-width="67.4%">
                  <div class="absolute inset-0 opacity-50 bg-gradient-to-r from-transparent via-white/10 to-transparent animate-shimmer"></div>
                </div>
              </div>
              <div class="flex justify-between text-2xs text-gray-500 mt-1">
                <span>67.4% Complete</span>
                <span>33.0% Remaining</span>
              </div>
            </div>
          </div>
          
          <!-- Time Details Cards - Enhanced Visual Design -->
          <div class="grid grid-cols-2 gap-4 mt-5">
            <div class="bg-gradient-to-br from-blue-900/20 to-blue-800/10 border border-blue-900/20 rounded-lg p-4 text-center relative overflow-hidden group hover:border-blue-700/30 transition-all duration-300">
              <div class="absolute inset-0 bg-blue-400/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              <div class="text-sm text-blue-400 font-medium flex items-center justify-center">
                <i class="ri-time-line mr-1.5"></i>
                Time Elapsed
              </div>
              <div class="text-2xl text-white font-bold mt-2 flex justify-center items-baseline">
                <span class="tabular-nums">88</span>
                <span class="text-sm text-gray-400 ml-1.5">days</span>
              </div>
              <div class="text-xs text-gray-400 mt-1">100.0% of sprint</div>
              <!-- Progress Indicator with Animation -->
              <div class="w-full h-1 bg-gray-800 rounded-full mt-2 overflow-hidden">
                <div class="h-full bg-gradient-to-r from-blue-600 to-blue-400 rounded-full relative" data-width="100.0">
                  <div class="absolute inset-0 opacity-40 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
                </div>
              </div>
            </div>
            <div class="bg-gradient-to-br from-purple-900/20 to-purple-800/10 border border-purple-900/20 rounded-lg p-4 text-center relative overflow-hidden group hover:border-purple-700/30 transition-all duration-300">
              <div class="absolute inset-0 bg-purple-400/5 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
              <div class="text-sm text-purple-400 font-medium flex items-center justify-center">
                <i class="ri-hourglass-line mr-1.5"></i>
                Time Left
              </div>
              <div class="text-2xl text-white font-bold mt-2 flex justify-center items-baseline">
                <span class="tabular-nums">0</span>
                <span class="text-sm text-gray-400 ml-1.5">days</span>
              </div>
              <div class="text-xs text-gray-400 mt-1">0.0% remaining</div>
              <!-- Progress Indicator with Animation -->
              <div class="w-full h-1 bg-gray-800 rounded-full mt-2 overflow-hidden">
                <div class="h-full bg-gradient-to-r from-purple-600 to-purple-400 rounded-full relative" data-width="0.0">
                  <div class="absolute inset-0 opacity-40 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Right Column: Velocity Analysis -->
    <div class="space-y-6 flex flex-col">
      <!-- Velocity Analysis Card - Modernized Design -->
      <div class="bg-gradient-to-br from-slate-900 to-gray-900 border border-gray-800/40 rounded-xl p-5 shadow-lg hover:shadow-xl transition-all duration-300 overflow-hidden relative group h-full flex-grow">
        <!-- Card Background Effects -->
        <div class="absolute -left-10 -top-10 w-40 h-40 bg-blue-500/5 rounded-full blur-xl opacity-70 group-hover:opacity-100 transition-opacity duration-500"></div>
        <div class="absolute inset-0 bg-grid-pattern-fine opacity-5 z-0"></div>
        
        <!-- Card Header with Status Indicator -->
        <div class="flex items-center mb-6">
          <div class="w-12 h-12 rounded-xl bg-gradient-to-br from-blue-600 to-cyan-700 flex items-center justify-center mr-4 shadow-lg relative border border-blue-500/20">
            <div class="absolute inset-0 rounded-xl bg-blue-400/10 opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
            <i class="ri-line-chart-line text-white text-xl"></i>
          </div>
          <div>
            <h3 class="text-lg font-bold text-white tracking-tight">Velocity Analysis</h3>
            <p class="text-xs text-gray-400 mt-0.5">Sprint performance metrics</p>
          </div>
          
          <!-- Status Indicator -->
          <div class="ml-auto bg-red-900/20 border-red-900/30 text-red-400 px-3 py-1 rounded-lg border text-xs font-medium flex items-center">
            <i class="ri-speed-down-line mr-1.5"></i>
            Need to Accelerate
          </div>
        </div>
        
        <div class="space-y-6">
          <!-- Current Velocity - Redesigned for Better Clarity -->
          <div class="relative bg-gray-800/50 rounded-lg p-4 border border-gray-800/30 hover:border-blue-800/30 transition-colors overflow-hidden group/velocity">
            <!-- Subtle Glow Effect -->
            <div class="absolute -right-4 -bottom-4 w-24 h-24 bg-blue-500/10 rounded-full blur-xl opacity-0 group-hover/velocity:opacity-100 transition-opacity duration-500"></div>
            
            <div class="flex justify-between items-center mb-3 relative">
              <span class="text-sm text-gray-300 font-medium flex items-center">
                <i class="ri-speed-line text-blue-400 mr-2"></i>
                Current Velocity
              </span>
              <div class="flex items-center space-x-2">
                <span class="text-blue-400 font-bold px-2.5 py-1 bg-blue-900/30 rounded-md text-sm">0.77%/day</span>
                <span class="text-red-400 bg-red-900/20 px-2 py-0.5 rounded text-xs font-medium">
                  -0.37%
                </span>
              </div>
            </div>
            
            <!-- Enhanced Progress Bar with Animation -->
            <div class="h-5 bg-gray-900 rounded-lg overflow-hidden shadow-inner border border-gray-800/40 group-hover/velocity:border-blue-800/30 transition-colors">
              <div class="h-full bg-gradient-to-r from-blue-600 to-blue-400 rounded-full relative" data-width="33.7">
                <div class="absolute inset-0 opacity-50 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
                <!-- Velocity Label Inside Bar -->
                <div class="absolute inset-0 flex items-center justify-end pr-2">
                  <div class="text-xs font-medium text-white/90">0.77%</div>
                </div>
              </div>
            </div>
            
            <!-- Gauge markers with Better Readability -->
            <div class="flex justify-between text-2xs text-gray-500 mt-2 px-1">
              <span>0%</span>
              <span class="relative">
                <span class="absolute -top-5 h-4 w-px bg-purple-500/50 left-1/2 -translate-x-1/2"></span>
                1.1363636363636365%
              </span>
              <span>2.272727272727273%</span>
            </div>
            
            <!-- Target Rate Info - Enhanced Visual Design -->
            <div class="flex justify-between items-center mt-4 pt-3 border-t border-gray-800/50">
              <div class="flex items-center text-xs text-gray-400">
                <i class="ri-focus-3-line text-purple-400 mr-1.5"></i>
                <span>Target Rate:</span>
              </div>
              <div class="flex items-center">
                <span class="text-purple-400 font-medium text-xs">2.27% / day</span>
                <span class="text-red-400 text-xs ml-2">
                  (need 1.51% more)
                </span>
              </div>
            </div>
          </div>
          
          <!-- Progress Metrics - Redesigned as Cards Grid -->
          <div class="grid grid-cols-2 gap-4">
            <!-- Completion Card -->
            <div class="bg-gray-800/50 border border-gray-800/30 rounded-lg p-4 text-center relative overflow-hidden group/card hover:border-blue-800/30 transition-colors">
              <div class="absolute -inset-1 bg-blue-500/5 rounded-lg opacity-0 group-hover/card:opacity-100 blur-xl transition-opacity duration-300"></div>
              <div class="relative">
                <div class="text-sm text-blue-400 font-medium flex items-center justify-center">
                  <i class="ri-check-double-line mr-1.5"></i>
                  Completion
                </div>
                <div class="text-2xl text-white font-bold mt-2 flex justify-center items-baseline">
                  <span class="tabular-nums">67.4</span>
                  <span class="text-sm text-gray-400 ml-1">%</span>
                </div>
                <div class="w-full h-1.5 bg-gray-900 rounded-full mt-3 overflow-hidden">
                  <div class="h-full bg-gradient-to-r from-blue-600 to-blue-400 rounded-full relative" data-width="67.4">
                    <div class="absolute inset-0 opacity-40 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- Remaining Card -->
            <div class="bg-gray-800/50 border border-gray-800/30 rounded-lg p-4 text-center relative overflow-hidden group/card hover:border-purple-800/30 transition-colors">
              <div class="absolute -inset-1 bg-purple-500/5 rounded-lg opacity-0 group-hover/card:opacity-100 blur-xl transition-opacity duration-300"></div>
              <div class="relative">
                <div class="text-sm text-purple-400 font-medium flex items-center justify-center">
                  <i class="ri-bookmark-line mr-1.5"></i>
                  Remaining
                </div>
                <div class="text-2xl text-white font-bold mt-2 flex justify-center items-baseline">
                  <span class="tabular-nums">33.0</span>
                  <span class="text-sm text-gray-400 ml-1">%</span>
                </div>
                <div class="w-full h-1.5 bg-gray-900 rounded-full mt-3 overflow-hidden">
                  <div class="h-full bg-gradient-to-r from-purple-600 to-purple-400 rounded-full relative" data-width="32.6">
                    <div class="absolute inset-0 opacity-40 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Summary Stats Cards - New Component for Better Data Overview -->
          <div class="bg-gray-800/50 border border-gray-800/30 rounded-lg p-4 relative overflow-hidden group/stats hover:border-gray-700 transition-colors">
            <div class="absolute -inset-1 bg-indigo-500/5 rounded-lg opacity-0 group-hover/stats:opacity-100 blur-xl transition-opacity duration-300"></div>
            
            <div class="flex items-center justify-between mb-3">
              <h4 class="text-sm font-medium text-gray-300 flex items-center">
                <i class="ri-bar-chart-grouped-line text-indigo-400 mr-1.5"></i>
                Performance Metrics
              </h4>
            </div>
            
            <div class="grid grid-cols-3 gap-3">
              <!-- Daily Progress -->
              <div class="bg-gray-900/70 rounded-lg p-3 border border-gray-800/30 group-hover/stats:border-indigo-900/30 transition-colors">
                <div class="text-xs text-indigo-400 font-medium">Daily Progress</div>
                <div class="text-lg text-white font-bold mt-1 flex items-baseline">
                  <span class="tabular-nums">0.77</span>
                  <span class="text-xs text-gray-500 ml-1">%/day</span>
                </div>
              </div>
              
              <!-- Required Rate -->
              <div class="bg-gray-900/70 rounded-lg p-3 border border-gray-800/30 group-hover/stats:border-blue-900/30 transition-colors">
                <div class="text-xs text-blue-400 font-medium">Required Rate</div>
                <div class="text-lg text-white font-bold mt-1 flex items-baseline">
                  <span class="tabular-nums">1.1363636363636365</span>
                  <span class="text-xs text-gray-500 ml-1">%/day</span>
                </div>
              </div>
              
              <!-- Necessary Rate -->
              <div class="bg-gray-900/70 rounded-lg p-3 border border-gray-800/30 group-hover/stats:border-red-900/30 transition-colors">
                <div class="text-xs text-red-400 font-medium">Necessary Rate</div>
                <div class="text-lg text-white font-bold mt-1 flex items-baseline">
                  <span class="tabular-nums">2.27</span>
                  <span class="text-xs text-gray-500 ml-1">%/day</span>
                </div>
              </div>
            </div>
            
            <!-- Legend with Improved Visuals -->
            <div class="flex items-center justify-between px-2 mt-4 text-xs text-gray-400 pt-3 border-t border-gray-800/30">
              <div class="flex items-center">
                <div class="w-3 h-3 bg-gradient-to-r from-blue-600 to-blue-400 rounded-full mr-2"></div>
                <span>Current</span>
              </div>
              <div class="flex items-center">
                <div class="w-3 h-3 bg-purple-500 rounded-full mr-2"></div>
                <span>Required</span>
              </div>
              <div class="flex items-center">
                <div class="w-3 h-3 bg-red-500 rounded-full mr-2"></div>
                <span>Necessary</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
  /* Enhanced Styling */
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
  
  .font-inter {
    font-family: 'Inter', system-ui, sans-serif;
  }

  .bg-grid-pattern {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='100' height='100' viewBox='0 0 100 100'%3E%3Cpath d='M0 0h100v100H0z' fill='none'/%3E%3Cpath d='M0 0h1v100H0zm20 0h1v100h-1zm20 0h1v100h-1zm20 0h1v100h-1zm20 0h1v100h-1zM0 0v1h100V0zm0 20v1h100v-1zm0 20v1h100v-1zm0 20v1h100v-1zm0 20v1h100v-1z' fill='currentColor'/%3E%3C/svg%3E");
  }
  
  .bg-grid-pattern-fine {
    background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cpath d='M0 0h40v40H0z' fill='none'/%3E%3Cpath d='M0 0h.5v40H0zm10 0h.5v40h-.5zm10 0h.5v40h-.5zm10 0h.5v40h-.5zM0 0v.5h40V0zm0 10v.5h40v-.5zm0 10v.5h40v-.5zm0 10v.5h40v-.5z' fill='currentColor'/%3E%3C/svg%3E");
  }

  .bg-pattern-stripes {
    background-image: repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.1) 5px, rgba(255,255,255,0.1) 10px);
  }
  
  .bg-pattern-diagonal {
    background-image: repeating-linear-gradient(45deg, transparent, transparent 5px, rgba(255,255,255,0.1) 5px, rgba(255,255,255,0.1) 10px);
  }
  
  .bg-stripes {
    background-image: repeating-linear-gradient(135deg, transparent, transparent 10px, rgba(255,255,255,0.1) 10px, rgba(255,255,255,0.1) 20px);
  }
  
  .dashed-line {
    background-image: linear-gradient(to bottom, currentColor 50%, transparent 50%);
    background-size: 1px 6px;
    background-repeat: repeat-y;
  }
  
  .glow-white {
    box-shadow: 0 0 5px rgba(255,255,255,0.7);
  }
  
  .pulse-animation {
    animation: pulse 2s infinite;
  }
  
  .pulse-animation-subtle {
    animation: pulse-subtle 3s infinite;
  }
  
  .animate-spin-slow {
    animation: spin 3s linear infinite;
  }
  
  .animate-pulse-slow {
    animation: pulse-glow 6s infinite;
  }
  
  .animate-pulse-slow-delayed {
    animation: pulse-glow 6s infinite 2s;
  }
  
  .animate-shimmer {
    animation: shimmer 2s infinite;
  }
  
  .tabular-nums {
    font-variant-numeric: tabular-nums;
  }
  
  @keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
    70% { box-shadow: 0 0 0 5px rgba(255, 255, 255, 0); }
    100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); }
  }
  
  @keyframes pulse-subtle {
    0% { box-shadow: 0 0 0 0 rgba(250, 204, 21, 0.5); }
    70% { box-shadow: 0 0 0 3px rgba(250, 204, 21, 0); }
    100% { box-shadow: 0 0 0 0 rgba(250, 204, 21, 0); }
  }
  
  @keyframes pulse-glow {
    0% { opacity: 0.3; }
    50% { opacity: 0.6; }
    100% { opacity: 0.3; }
  }
  
  @keyframes shimmer {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }
  
  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }
  
  .text-2xs {
    font-size: 0.625rem;
  }
</style>

<script>
  // Enhanced JavaScript for better animations and interactions
  document.addEventListener('DOMContentLoaded', function() {
    // Apply all data-width attributes to width style
    document.querySelectorAll('[data-width]').forEach(function(el) {
      el.style.width = el.getAttribute('data-width') + '%';
    });
    
    // Apply all data-right-pos attributes to right style
    document.querySelectorAll('[data-right-pos]').forEach(function(el) {
      el.style.right = 'calc(100% - ' + el.getAttribute('data-right-pos') + '%)';
    });
    
    // Apply all data-left attributes to left style
    document.querySelectorAll('[data-left]').forEach(function(el) {
      el.style.left = el.getAttribute('data-left') + '%';
    });
    
    // Added event listener for notifications
    document.dispatchEvent(new CustomEvent('qa-report-loaded'));
    
    // Added recalculation for ACTUAL_PROGRESS_RATE - use calculated progress per day from Data.json
    const completionProgress = parseFloat(document.querySelector('[data-completion-progress]')?.getAttribute('data-completion-progress') || 0);
    const daysPassed = parseFloat(document.querySelector('[data-days-passed]')?.getAttribute('data-days-passed') || 1);
    
    if (completionProgress && daysPassed) {
      const actualProgressRate = (completionProgress / daysPassed).toFixed(2);
      document.querySelectorAll('[data-actual-progress-rate]').forEach(function(el) {
        el.textContent = actualProgressRate;
      });
    }
    
    // Remove click event handlers for notification links that were removed
    document.removeEventListener('click', function(e) {
      if (e.target && (e.target.id === 'show-velocity-notification' || e.target.id === 'notification-link')) {
        e.preventDefault();
      }
    });
  });
</script>     
    <!-- Key Metrics -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
    <!-- Test Coverage Card -->
<!-- (1) Test Coverage (Card) -->

<div x-data="{ isOpen: false }" class="relative group transform transition-all duration-300 hover:-translate-y-1">
  <!-- Glow Effect -->
  <div class="absolute -inset-2.5 bg-gradient-to-r from-blue-700 to-indigo-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
  <!-- Main Card -->
  <div class="relative bg-gray-900 rounded-xl p-6 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
    <div class="flex items-center mb-4">
      <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-600 to-indigo-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-indigo-500/30">
        <i class="ri-shield-check-line text-white text-lg"></i>
      </div>
      <div class="ml-3 flex-1">
        <div class="flex items-center justify-between">
          <h4 class="text-base font-semibold text-white">Test Coverage</h4>
          <button @click="isOpen = true" class="ml-2 text-gray-400 hover:text-gray-300 focus:outline-none transition-colors duration-200">
            <i class="ri-information-line"></i>
          </button>
        </div>
        <p class="text-xs text-gray-400 mt-0.5">Based on executed test cases</p>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex items-center justify-between mb-3">
      <div class="flex items-baseline space-x-2">
        <span class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-indigo-400 count-animation neon-text" data-count="75.41">0</span><span class="text-xl font-bold text-indigo-400">%</span>
        <div class="text-xs bg-emerald-900/50 text-emerald-300 px-2 py-1 rounded-full flex items-center">
          <i class="ri-arrow-up-line mr-1"></i>2.2%
        </div>
      </div>
      <div class="text-right">
        <div class="text-sm font-medium text-white">365/484</div>
        <div class="text-xs text-gray-400">Executed</div>
      </div>
    </div>

    <!-- Progress Bar -->
    <div class="w-full">
      <div class="w-full bg-gray-700 rounded-full h-2.5 overflow-hidden shadow-inner">
        <div class="h-full rounded-full transition-all duration-1000 ease-out bg-gradient-to-r from-blue-500 to-indigo-500 relative" 
             style="width: 75.41%">
          <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
        </div>
      </div>
      <div class="flex justify-between text-xs text-gray-400 mt-2">
        <span>Target: 90%</span> 
        <span>Executed Tests</span>
      </div>
    </div>
  </div>

  <!-- Modal (Test Coverage) -->
  <div x-show="isOpen" 
       x-cloak
       class="fixed inset-0 z-[9999]"
       x-transition:enter="transition ease-out duration-300"
       x-transition:enter-start="opacity-0"
       x-transition:enter-end="opacity-100"
       x-transition:leave="transition ease-in duration-200"
       x-transition:leave-start="opacity-100"
       x-transition:leave-end="opacity-0">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-black/75 transition-all duration-300" @click="isOpen = false"></div>
    
    <!-- Modal Content -->
    <div class="fixed inset-0 flex items-center justify-center p-4 z-[10000]">
      <div class="relative w-[95%] max-w-[1800px] bg-gray-900 rounded-xl shadow-2xl border border-gray-700"
           @click.outside="isOpen = false"
           x-transition:enter="transition ease-out duration-300"
           x-transition:enter-start="opacity-0 scale-95"
           x-transition:enter-end="opacity-100 scale-100"
           x-transition:leave="transition ease-in duration-200"
           x-transition:leave-start="opacity-100 scale-100"
           x-transition:leave-end="opacity-0 scale-95">
        <div class="p-8">
          <button @click="isOpen = false" class="absolute top-6 right-6 text-gray-400 hover:text-white bg-gray-800 hover:bg-gray-700 rounded-full p-2 transition-colors duration-200">
            <i class="ri-close-line text-2xl"></i>
          </button>
          
          <div class="flex items-center mb-8 border-b border-gray-700 pb-4">
            <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-blue-600 to-indigo-600 mr-4 flex items-center justify-center shadow-lg">
              <i class="ri-shield-check-line text-white text-2xl"></i>
            </div>
            <div>
              <h3 class="text-2xl font-bold text-white">Test Coverage Details</h3>
              <p class="text-gray-400 text-base">Analysis of test execution status</p>
            </div>
            <div class="ml-auto bg-gray-800 rounded-lg px-4 py-3 flex flex-col items-center border border-indigo-900/30">
              <span class="text-indigo-400 font-semibold text-2xl">75.4%</span>
              <span class="text-gray-400 text-sm">Executed</span>
            </div>
          </div>

          <div class="space-y-6"> <!-- เพิ่ม spacing ระหว่าง sections -->
            <!-- Progress Overview - New Section -->
            <div class="bg-gradient-to-br from-indigo-900/30 to-blue-900/30 rounded-xl p-6 shadow-sm">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-white">Overall Progress</h3>
                <!-- ปรับแต่งส่วนแสดงเปอร์เซ็นต์ -->
                <div class="flex items-center bg-gray-800 rounded-full px-4 py-2 shadow-lg border border-indigo-900/30">
                  <div class="mr-2">
                    <div class="text-lg font-bold bg-gradient-to-r from-indigo-400 to-blue-400 bg-clip-text text-transparent">
                      67.4%
                    </div>
                  </div>
                  <div class="text-xs font-medium text-gray-400">Complete</div>
                </div>
              </div>
              
              <!-- Progress Bar - ปรับแต่งให้ดูน่าสนใจขึ้น -->
              <div class="relative w-full h-4 bg-gray-800 rounded-full mb-4 overflow-hidden">
                <!-- เพิ่ม Background Pattern -->
                <div class="absolute inset-0 bg-gradient-to-r from-transparent via-gray-700/30 to-transparent"></div>
                <!-- Progress Bar -->
                <div class="relative h-full rounded-full transition-all duration-500 bg-gradient-to-r from-indigo-500 to-blue-500" 
                     style="width: 67.4%">
                  <!-- เพิ่ม Shine Effect -->
                  <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/30 to-transparent animate-shimmer"></div>
                </div>
              </div>

              <!-- Progress Stats Grid -->
              <div class="grid grid-cols-2 md:grid-cols-4 gap-4">
                <div class="bg-gray-800/50 rounded-lg p-4 shadow-sm border border-indigo-900/30">
                  <p class="text-sm font-medium text-gray-400 mb-1">Completed</p>
                  <p class="text-2xl font-bold text-indigo-400">67.4%</p>
                </div>
                <div class="bg-gray-800/50 rounded-lg p-4 shadow-sm border border-blue-900/30">
                  <p class="text-sm font-medium text-gray-400 mb-1">Remaining</p>
                  <p class="text-2xl font-bold text-blue-400">32.6%</p>
                </div>
                <div class="bg-gray-800/50 rounded-lg p-4 shadow-sm border border-emerald-900/30">
                  <p class="text-sm font-medium text-gray-400 mb-1">Daily Rate</p>
                  <p class="text-2xl font-bold text-emerald-400">0.77%</p>
                </div>
                <div class="bg-gray-800/50 rounded-lg p-4 shadow-sm border border-purple-900/30">
                  <p class="text-sm font-medium text-gray-400 mb-1">Expected</p>
                  <p class="text-2xl font-bold text-purple-400">100.00000000000001%</p>
                </div>
              </div>
            </div>

            <!-- Timeline Section - Improved -->
            <div class="bg-gray-800 rounded-xl p-6 shadow-sm">
              <h3 class="text-lg font-semibold text-white mb-4">Sprint Timeline</h3>
              
              <!-- Timeline Progress Bar -->
              <div class="relative w-full h-2 bg-gray-700 rounded-full mb-6">
                <div class="absolute h-2 rounded-full bg-indigo-500" 
                     style="width: calc((88 / 88) * 100%)">
                </div>
              </div>

              <div class="grid grid-cols-2 md:grid-cols-3 gap-6">
                <div>
                  <p class="text-sm text-gray-400">Start Date</p>
                  <p class="text-base font-semibold text-white">2025-02-01</p>
                </div>
                <div>
                  <p class="text-sm text-gray-400">End Date</p>
                  <p class="text-base font-semibold text-white">2025-04-29</p>
                </div>
                <div>
                  <p class="text-sm text-gray-400">Duration</p>
                  <p class="text-base font-semibold text-white">88 days</p>
                </div>
                <div>
                  <p class="text-sm text-gray-400">Days Passed</p>
                  <p class="text-base font-semibold text-emerald-400">88 days</p>
                </div>
                <div>
                  <p class="text-sm text-gray-400">Days Remaining</p>
                  <p class="text-base font-semibold text-amber-400">0 days</p>
                </div>
                <div>
                  <p class="text-sm text-gray-400">Daily Target</p>
                  <p class="text-base font-semibold text-purple-400">1.1363636363636365%</p>
                </div>
              </div>
            </div>

            <!-- Status Section - Enhanced -->
            <div class="bg-gray-800 rounded-xl p-6 shadow-sm">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold text-white">Project Status</h3>
                <span class="px-3 py-1 text-sm font-medium rounded-full bg-red-100 text-red-800">
                  Behind Schedule
                </span>
              </div>

              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Actual vs Expected -->
                <div class="space-y-2">
                  <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-400">Actual Progress</span>
                    <span class="font-medium text-indigo-400">67.4%</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-400">Expected Progress</span>
                    <span class="font-medium text-purple-400">100.00000000000001%</span>
                  </div>
                  <div class="w-full h-2 bg-gray-700 rounded-full mt-2">
                    <div class="h-2 rounded-full bg-indigo-500" 
                         style="width: 67.4%">
                    </div>
                  </div>
                </div>

                <!-- Rate Analysis -->
                <div class="space-y-2">
                  <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-400">Current Rate</span>
                    <span class="font-medium text-emerald-400">0.77% / day</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <span class="text-sm text-gray-400">Required Rate</span>
                    <span class="font-medium text-blue-400">1.1363636363636365% / day</span>
                  </div>
                  <div class="w-full h-2 bg-gray-700 rounded-full mt-2">
                    <div class="h-2 rounded-full bg-emerald-500" 
                         style="width: calc((0.77 / 1.1363636363636365) * 100%)">
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Test Coverage Section - Modernized & Enhanced -->
            <div class="bg-gray-800 rounded-xl p-6 shadow-sm">
              <div class="flex items-center justify-between mb-6">
                <div class="flex items-center">
                  <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-green-600 to-emerald-700 flex items-center justify-center shadow-md mr-4">
                    <i class="ri-shield-check-line text-white text-xl"></i>
                  </div>
                  <div>
                    <h3 class="text-lg font-semibold text-white">Test Coverage</h3>
                    <p class="text-sm text-gray-400">Overall testing progress and status</p>
                  </div>
                </div>
                <!-- Coverage Percentage Badge -->
                <div class="bg-gradient-to-r from-green-600 to-emerald-700 text-white px-4 py-2 rounded-full shadow-lg">
                  <div class="text-lg font-bold">67.4%</div>
                  <div class="text-xs opacity-80">Coverage</div>
                </div>
              </div>
              
              <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-8">
                <!-- Total Cases Card -->
                <div class="bg-gradient-to-br from-gray-800 to-gray-700 rounded-xl p-4 shadow-sm border border-gray-600">
                  <div class="flex items-center justify-between mb-3">
                    <p class="text-sm font-medium text-gray-300">Total Cases</p>
                    <div class="w-8 h-8 rounded-full bg-gray-600 flex items-center justify-center">
                      <i class="ri-file-list-3-line text-gray-300"></i>
                    </div>
                  </div>
                  <div class="flex items-baseline">
                    <p class="text-3xl font-bold text-white">484</p>
                    <p class="ml-2 text-sm text-gray-400">tests</p>
                  </div>
                </div>

                <!-- Passed Cases Card -->
                <div class="bg-gradient-to-br from-green-900/30 to-emerald-900/30 rounded-xl p-4 shadow-sm border border-green-900/30">
                  <div class="flex items-center justify-between mb-3">
                    <p class="text-sm font-medium text-green-300">Passed</p>
                    <div class="w-8 h-8 rounded-full bg-green-800/50 flex items-center justify-center">
                      <i class="ri-checkbox-circle-line text-green-400"></i>
                    </div>
                  </div>
                  <div class="flex items-baseline">
                    <p class="text-3xl font-bold text-green-400">326</p>
                    <p class="ml-2 text-sm text-green-400/70">tests</p>
                  </div>
                  <div class="mt-2 text-xs font-medium text-green-400">
                    67.4% of total
                  </div>
                </div>

                <!-- Failed Cases Card -->
                <div class="bg-gradient-to-br from-red-900/30 to-rose-900/30 rounded-xl p-4 shadow-sm border border-red-900/30">
                  <div class="flex items-center justify-between mb-3">
                    <p class="text-sm font-medium text-red-300">Failed</p>
                    <div class="w-8 h-8 rounded-full bg-red-800/50 flex items-center justify-center">
                      <i class="ri-close-circle-line text-red-400"></i>
                    </div>
                  </div>
                  <div class="flex items-baseline">
                    <p class="text-3xl font-bold text-red-400">19</p>
                    <p class="ml-2 text-sm text-red-400/70">tests</p>
                  </div>
                  <div class="mt-2 text-xs font-medium text-red-400">
                    3.93% of total
                  </div>
                </div>

                <!-- Blocked Cases Card -->
                <div class="bg-gradient-to-br from-amber-900/30 to-orange-900/30 rounded-xl p-4 shadow-sm border border-amber-900/30">
                  <div class="flex items-center justify-between mb-3">
                    <p class="text-sm font-medium text-amber-300">Blocked</p>
                    <div class="w-8 h-8 rounded-full bg-amber-800/50 flex items-center justify-center">
                      <i class="ri-stop-circle-line text-amber-400"></i>
                    </div>
                  </div>
                  <div class="flex items-baseline">
                    <p class="text-3xl font-bold text-amber-400">0</p>
                    <p class="ml-2 text-sm text-amber-400/70">tests</p>
                  </div>
                  <div class="mt-2 text-xs font-medium text-amber-400">
                    0.0% of total
                  </div>
                </div>
              </div>

              <!-- Test Status Distribution -->
              <div class="relative">
                <div class="absolute -inset-0.5 bg-gradient-to-r from-green-500 via-amber-500 to-red-500 rounded-lg opacity-50 blur"></div>
                <div class="relative w-full h-6 bg-gray-700 rounded-lg overflow-hidden">
                  <div class="flex h-full">
                    <div class="h-full bg-gradient-to-r from-green-500 to-green-600 transition-all duration-500" style="width: 67.4%"></div>
                    <div class="h-full bg-gradient-to-r from-red-500 to-red-600 transition-all duration-500" style="width: 3.93%"></div>
                    <div class="h-full bg-gradient-to-r from-amber-500 to-amber-600 transition-all duration-500" style="width: 0.0%"></div>
                    <div class="h-full bg-gradient-to-r from-blue-500 to-blue-600 transition-all duration-500" style="width: 20.66%"></div>
                  </div>
                </div>
              </div>

              <div class="flex justify-center space-x-6 mt-4">
                <div class="flex items-center">
                  <span class="w-3 h-3 rounded-full bg-gradient-to-r from-green-500 to-green-600 mr-2"></span>
                  <span class="text-sm text-gray-400">Passed (67.4%)</span>
                </div>
                <div class="flex items-center">
                  <span class="w-3 h-3 rounded-full bg-gradient-to-r from-red-500 to-red-600 mr-2"></span>
                  <span class="text-sm text-gray-400">Failed (3.93%)</span>
                </div>
                <div class="flex items-center">
                  <span class="w-3 h-3 rounded-full bg-gradient-to-r from-amber-500 to-amber-600 mr-2"></span>
                  <span class="text-sm text-gray-400">Blocked (0.0%)</span>
                </div>
                <div class="flex items-center">
                  <span class="w-3 h-3 rounded-full bg-gradient-to-r from-blue-500 to-blue-600 mr-2"></span>
                  <span class="text-sm text-gray-400">Other (20.66%)</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> 
    <!-- Defect Density Card -->
<!-- (2) Defect Density Card -->

<div x-data="{ isDefectDensityModalOpen: false }" class="relative group transform transition-all duration-300 hover:-translate-y-1">
  <!-- Glow Effect -->
  <div class="absolute -inset-2.5 bg-gradient-to-r from-red-700 to-pink-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
  <!-- Main Card -->
  <div class="relative bg-gray-900 rounded-xl p-6 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
    <div class="flex items-center mb-4">
      <div class="w-10 h-10 rounded-full bg-gradient-to-br from-red-600 to-pink-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-red-500/30">
        <i class="ri-bug-line text-white text-lg"></i>
      </div>
      <div class="ml-3 flex-1">
        <div class="flex items-center justify-between">
          <h4 class="text-base font-semibold text-white">Defect Density</h4>
          <button @click="isDefectDensityModalOpen = true" class="ml-2 text-gray-400 hover:text-gray-300 focus:outline-none transition-colors duration-200">
            <i class="ri-information-line"></i>
          </button>
        </div>
        <p class="text-xs text-gray-400 mt-0.5">Defects per 100 test cases</p>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex items-center justify-between mb-3">
      <div class="flex items-baseline space-x-2">
        <span class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-red-400 to-pink-400 count-animation neon-text" data-count="0.0">0</span><span class="text-xl font-bold text-pink-400">%</span>
        <div class="text-xs bg-red-900/50 text-red-300 px-2 py-1 rounded-full flex items-center">
          <i class="ri-bug-line mr-1"></i>0
        </div>
      </div>
      <div class="text-right">
        <div class="text-sm font-medium text-white">0/0</div>
        <div class="text-xs text-gray-400">Fixed Defects</div>
      </div>
    </div>

    <!-- Progress Bar -->
    <div class="w-full">
      <div class="w-full bg-gray-700 rounded-full h-2.5 overflow-hidden shadow-inner">
        <div class="h-full rounded-full transition-all duration-1000 ease-out bg-gradient-to-r from-red-500 to-pink-500 relative" 
             style="width: 0%">
          <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
        </div>
      </div>
      <div class="flex justify-between text-xs text-gray-400 mt-2">
        <span>Target: < 5%</span> 
        <span>Fixed: 0%</span>
      </div>
    </div>
  </div>
  
  <!-- Defect Density Modal -->
  <div x-show="isDefectDensityModalOpen" 
       x-cloak
       class="fixed inset-0 z-[100]"
       x-transition:enter="transition ease-out duration-300"
       x-transition:enter-start="opacity-0"
       x-transition:enter-end="opacity-100"
       x-transition:leave="transition ease-in duration-200"
       x-transition:leave-start="opacity-100"
       x-transition:leave-end="opacity-0">
    <!-- Backdrop with enhanced blur -->
    <div class="fixed inset-0 bg-black/75 transition-all duration-300" @click="isDefectDensityModalOpen = false"></div>
    
    <!-- Modal Content -->
    <div class="fixed inset-0 flex items-center justify-center p-4 z-[110]">
      <div class="relative w-[95%] max-w-[1800px] bg-gray-900 rounded-xl shadow-2xl border border-gray-700"
           @click.outside="isDefectDensityModalOpen = false"
           x-transition:enter="transition ease-out duration-300"
           x-transition:enter-start="opacity-0 scale-95"
           x-transition:enter-end="opacity-100 scale-100"
           x-transition:leave="transition ease-in duration-200"
           x-transition:leave-start="opacity-100 scale-100"
           x-transition:leave-end="opacity-0 scale-95">
        <div class="p-8">
          <button @click="isDefectDensityModalOpen = false" class="absolute top-6 right-6 text-gray-400 hover:text-white bg-gray-800 hover:bg-gray-700 rounded-full p-2 transition-colors duration-200">
            <i class="ri-close-line text-2xl"></i>
          </button>
          
          <div class="flex items-center mb-8 border-b border-gray-700 pb-4">
            <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-red-600 to-pink-600 mr-4 flex items-center justify-center shadow-lg">
              <i class="ri-bug-line text-white text-2xl"></i>
            </div>
            <div>
              <h3 class="text-2xl font-bold text-white">Defect Density Details</h3>
              <p class="text-gray-400 text-base">Analysis of defects found during testing</p>
            </div>
            <div class="ml-auto bg-gray-800 rounded-lg px-4 py-3 flex flex-col items-center border border-red-900/30">
              <span class="text-red-400 font-semibold text-2xl">0.0%</span>
              <span class="text-gray-400 text-sm">Density</span>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Defect Status -->
            <div class="bg-gray-800/50 rounded-xl p-5 border border-gray-700">
              <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
                <i class="ri-error-warning-line mr-2 text-red-400"></i>
                Defect Status
              </h4>
              <div class="space-y-3">
                <div class="flex justify-between items-center">
                  <span class="text-base text-gray-400">Total Defects</span>
                  <span class="font-medium text-white text-lg">0</span>
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-base text-gray-400">Open Defects</span>
                  <span class="font-medium text-red-400 text-lg">0</span>
                </div>
                <div class="flex justify-between items-center">
                  <span class="text-base text-gray-400">Fixed Defects</span>
                  <span class="font-medium text-emerald-400 text-lg">0</span>
                </div>
                <hr class="border-gray-700 my-2">
                <div class="flex justify-between items-center">
                  <span class="text-base text-gray-400">Fix Rate</span>
                  <span class="font-medium text-blue-400 text-lg">0%</span>
                </div>
              </div>
            </div>

            <!-- Defect Density Calculation -->
            <div class="space-y-6">
              <div class="bg-gray-800/50 rounded-xl p-5 border border-gray-700">
                <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
                  <i class="ri-calculator-line mr-2 text-pink-400"></i>
                  Density Calculation
                </h4>
                <div class="bg-gray-900/70 rounded-lg p-6 mb-3 text-center">
                  <span class="font-mono text-lg text-gray-300">
                    ( <span class="text-red-400">0</span> / <span class="text-white">484</span> ) * 100 = <span class="font-bold text-pink-400 text-xl">0.0%</span>
                  </span>
                </div>
                <p class="text-sm text-gray-500 text-center">
                  Defect density represents the number of defects per 100 test cases
                </p>
              </div>
              
              <div class="bg-gray-800/50 rounded-xl p-5 border border-gray-700">
                <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
                  <i class="ri-check-double-line mr-2 text-emerald-400"></i>
                  Fix Rate
                </h4>
                <div class="flex items-center justify-center space-x-10">
                  <div class="text-center">
                    <p class="text-sm text-gray-400 mb-1">Fixed</p>
                    <p class="text-2xl font-semibold text-emerald-400">0</p>
                  </div>
                  <div class="text-center">
                    <p class="text-sm text-gray-400 mb-1">Rate</p>
                    <p class="text-2xl font-semibold text-blue-400">0%</p>
                  </div>
                  <div class="text-center">
                    <p class="text-sm text-gray-400 mb-1">Open</p>
                    <p class="text-2xl font-semibold text-red-400">0</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Defect Severity Distribution -->
          <div class="mt-6 bg-gray-800/50 rounded-xl p-5 border border-gray-700">
            <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
              <i class="ri-bar-chart-2-line mr-2 text-amber-400"></i>
              Defect Severity Distribution
            </h4>
            
            
            
            <div class="relative">
              <div class="absolute -inset-0.5 bg-gradient-to-r from-red-500 via-amber-500 to-blue-500 rounded-lg opacity-50 blur"></div>
              <div class="relative w-full h-6 bg-gray-700 rounded-lg overflow-hidden">
                <div class="flex h-full">
                  <div class="h-full bg-gradient-to-r from-red-600 to-red-700 transition-all duration-500" style="width: 0%" title="Critical: 0%"></div>
                  <div class="h-full bg-gradient-to-r from-amber-600 to-amber-700 transition-all duration-500" style="width: 0%" title="High: 0%"></div>
                  <div class="h-full bg-gradient-to-r from-yellow-600 to-yellow-700 transition-all duration-500" style="width: 0%" title="Medium: 0%"></div>
                  <div class="h-full bg-gradient-to-r from-blue-600 to-blue-700 transition-all duration-500" style="width: 0%" title="Low: 0%"></div>
                </div>
              </div>
            </div>
            
            <div class="flex flex-wrap justify-center gap-x-5 gap-y-2 mt-4 text-xs">
              <div class="flex items-center"><span class="w-2.5 h-2.5 rounded-full bg-gradient-to-r from-red-600 to-red-700 mr-1.5"></span><span class="text-gray-400">Critical (0%)</span></div>
              <div class="flex items-center"><span class="w-2.5 h-2.5 rounded-full bg-gradient-to-r from-amber-600 to-amber-700 mr-1.5"></span><span class="text-gray-400">High (0%)</span></div>
              <div class="flex items-center"><span class="w-2.5 h-2.5 rounded-full bg-gradient-to-r from-yellow-600 to-yellow-700 mr-1.5"></span><span class="text-gray-400">Medium (0%)</span></div>
              <div class="flex items-center"><span class="w-2.5 h-2.5 rounded-full bg-gradient-to-r from-blue-600 to-blue-700 mr-1.5"></span><span class="text-gray-400">Low (0%)</span></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>     
    <!-- Time to Fix Card -->
<!-- (3) Time to Fix Card -->
  <!-- Placeholder value from sample data -->
  <!-- Placeholder value -->

<div x-data="{ isTimeToFixModalOpen: false }" class="relative group transform transition-all duration-300 hover:-translate-y-1">
  <!-- Glow Effect -->
  <div class="absolute -inset-2.5 bg-gradient-to-r from-amber-700 to-orange-700 rounded-lg blur opacity-30 group-hover:opacity-100 transition duration-500 group-hover:duration-200"></div>
  <!-- Main Card -->
  <div class="relative bg-gray-900 rounded-xl p-6 shadow-2xl hover:shadow-2xl transition-all duration-300 h-full border border-gray-800 backdrop-blur-xl">
    <div class="flex items-center mb-4">
      <div class="w-10 h-10 rounded-full bg-gradient-to-br from-amber-600 to-orange-600 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-amber-500/30">
        <i class="ri-time-line text-white text-lg"></i>
      </div>
      <div class="ml-3 flex-1">
        <div class="flex items-center justify-between">
          <h4 class="text-base font-semibold text-white">Time to Fix</h4>
          <button @click="isTimeToFixModalOpen = true" class="ml-2 text-gray-400 hover:text-gray-300 focus:outline-none transition-colors duration-200">
            <i class="ri-information-line"></i>
          </button>
        </div>
        <p class="text-xs text-gray-400 mt-0.5">Average defect resolution time</p>
      </div>
    </div>

    <!-- Main Content -->
    <div class="flex items-center justify-between mb-3">
      <div class="flex items-baseline space-x-2">
        <span class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-amber-400 to-orange-400 count-animation neon-text" data-count="2.7">0</span><span class="text-xl font-bold text-orange-400">days</span>
        <div class="text-xs bg-emerald-900/50 text-emerald-300 px-2 py-1 rounded-full flex items-center">
          <i class="ri-arrow-down-line mr-1"></i>-0.4d
        </div>
      </div>
      <div class="text-right">
        <div class="text-sm font-medium text-white">/143</div>
        <div class="text-xs text-gray-400">Resolution Rate</div>
      </div>
    </div>

    <!-- Progress Bar -->
    <div class="w-full">
      <div class="w-full bg-gray-700 rounded-full h-2.5 overflow-hidden shadow-inner">
        <div class="h-full rounded-full transition-all duration-1000 ease-out bg-gradient-to-r from-amber-500 to-orange-500 relative" 
             style="width: %">
          <div class="absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent animate-shimmer"></div>
        </div>
      </div>
      <div class="flex justify-between text-xs text-gray-400 mt-2">
        <span>Target: < 3.5d</span> 
        <span>Current Sprint</span>
      </div>
    </div>
  </div>
  
  <!-- Time to Fix Modal -->
  <div x-show="isTimeToFixModalOpen" 
       x-cloak
       class="fixed inset-0 z-[100]"
       x-transition:enter="transition ease-out duration-300"
       x-transition:enter-start="opacity-0"
       x-transition:enter-end="opacity-100"
       x-transition:leave="transition ease-in duration-200"
       x-transition:leave-start="opacity-100"
       x-transition:leave-end="opacity-0">
    <!-- Backdrop -->
    <div class="fixed inset-0 bg-black/75 transition-all duration-300" @click="isTimeToFixModalOpen = false"></div>
    
    <!-- Modal Content -->
    <div class="fixed inset-0 flex items-center justify-center p-4 z-[110]">
      <div class="relative w-[95%] max-w-[1800px] bg-gray-900 rounded-xl shadow-2xl border border-gray-700"
           @click.outside="isTimeToFixModalOpen = false"
           x-transition:enter="transition ease-out duration-300"
           x-transition:enter-start="opacity-0 scale-95"
           x-transition:enter-end="opacity-100 scale-100"
           x-transition:leave="transition ease-in duration-200"
           x-transition:leave-start="opacity-100 scale-100"
           x-transition:leave-end="opacity-0 scale-95">
        <div class="p-8">
          <button @click="isTimeToFixModalOpen = false" class="absolute top-6 right-6 text-gray-400 hover:text-white bg-gray-800 hover:bg-gray-700 rounded-full p-2 transition-colors duration-200">
            <i class="ri-close-line text-2xl"></i>
          </button>
          
          <div class="flex items-center mb-8 border-b border-gray-700 pb-4">
            <div class="w-12 h-12 rounded-lg bg-gradient-to-r from-amber-600 to-orange-600 mr-4 flex items-center justify-center shadow-lg">
              <i class="ri-time-line text-white text-2xl"></i>
            </div>
            <div>
              <h3 class="text-2xl font-bold text-white">ระยะเวลาในการแก้ไข (Time to Fix)</h3>
              <p class="text-gray-400 text-base">รายงานวิเคราะห์ประสิทธิภาพในการแก้ไขข้อบกพร่อง</p>
            </div>
            <div class="ml-auto bg-gray-800 rounded-lg px-4 py-3 flex flex-col items-center border border-amber-900/30">
              <span class="text-amber-400 font-semibold text-2xl">2.7</span>
              <span class="text-gray-400 text-sm">วันโดยเฉลี่ย</span>
            </div>
          </div>

          <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-6">
            <!-- Time Resolution Analysis -->
            <div class="bg-gray-800/50 border border-gray-700 rounded-xl p-6 shadow-sm">
              <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
                <i class="ri-line-chart-line mr-2 text-amber-400"></i>
                การวิเคราะห์แนวโน้มระยะเวลาแก้ไข
              </h4>
              <div class="bg-gray-900/70 rounded-lg border border-gray-800 p-6 h-64 mb-4">
                <!-- Placeholder for chart (would be rendered via JS) -->
                <div class="h-full w-full flex items-center justify-center">
                  <div class="text-center">
                    <div class="w-16 h-16 rounded-full bg-amber-900/30 mx-auto mb-3 flex items-center justify-center">
                      <i class="ri-line-chart-line text-2xl text-amber-400"></i>
                    </div>
                    <p class="text-base text-gray-400">แนวโน้มระยะเวลาในการแก้ไขข้อบกพร่อง</p>
                  </div>
                </div>
              </div>
              
              <div class="grid grid-cols-4 gap-3">
                <div class="bg-amber-900/20 rounded-lg p-3 text-center">
                  <p class="text-sm text-amber-400 mb-1">Sprint ปัจจุบัน</p>
                  <p class="text-2xl font-semibold text-amber-300">2.7 <span class="text-sm">วัน</span></p>
                </div>
                <div class="bg-indigo-900/20 rounded-lg p-3 text-center">
                  <p class="text-sm text-indigo-400 mb-1">Sprint ก่อนหน้า</p>
                  <p class="text-2xl font-semibold text-indigo-300">3.1 <span class="text-sm">วัน</span></p>
                </div>
                <div class="bg-emerald-900/20 rounded-lg p-3 text-center">
                  <p class="text-sm text-emerald-400 mb-1">การปรับปรุง</p>
                  <p class="text-2xl font-semibold text-emerald-300">-0.4 <span class="text-sm">วัน</span></p>
                </div>
                <div class="bg-blue-900/20 rounded-lg p-3 text-center">
                  <p class="text-sm text-blue-400 mb-1">เป้าหมาย</p>
                  <p class="text-2xl font-semibold text-blue-300">3.5 <span class="text-sm">วัน</span></p>
                </div>
              </div>
            </div>

            <!-- Statistics -->
            <div class="space-y-6">
              <div class="bg-gray-800/50 border border-gray-700 rounded-xl p-6 shadow-sm">
                <h4 class="text-base font-semibold text-white mb-4 flex items-center">
                  <i class="ri-numbers-line mr-2 text-amber-400"></i>
                  สถิติการแก้ไข
                </h4>
                <div class="space-y-4">
                  <!-- Visually improved metric display with micro bars -->
                  <div>
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-base text-gray-400">ค่าเฉลี่ย</span>
                      <span class="font-medium text-amber-400 text-lg">2.7 วัน</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2 overflow-hidden">
                      <div class="bg-amber-500 h-2 rounded-full" style="width: 60%"></div>
                    </div>
                  </div>
                  <div>
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-base text-gray-400">ค่ามัธยฐาน</span>
                      <span class="font-medium text-amber-400 text-lg">2.4000000000000004 วัน</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2 overflow-hidden">
                      <div class="bg-amber-500 h-2 rounded-full" style="width: 45%"></div>
                    </div>
                  </div>
                  <div>
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-base text-gray-400">เร็วที่สุด</span>
                      <span class="font-medium text-emerald-400 text-lg">0.5 วัน</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2 overflow-hidden">
                      <div class="bg-emerald-500 h-2 rounded-full" style="width: 15%"></div>
                    </div>
                  </div>
                  <div>
                    <div class="flex justify-between items-center mb-2">
                      <span class="text-base text-gray-400">นานที่สุด</span>
                      <span class="font-medium text-red-400 text-lg">5.8 วัน</span>
                    </div>
                    <div class="w-full bg-gray-700 rounded-full h-2 overflow-hidden">
                      <div class="bg-red-500 h-2 rounded-full" style="width: 90%"></div>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- Severity Breakdown -->
              <div class="bg-gray-800/50 border border-gray-700 rounded-xl p-6 shadow-sm">
                <h4 class="text-base font-semibold text-white mb-4 flex items-center">
                  <i class="ri-bug-line mr-2 text-amber-400"></i>
                  แยกตามความรุนแรง
                </h4>
                <div class="space-y-3">
                  <div class="flex justify-between items-center">
                    <div class="flex items-center">
                      <span class="w-4 h-4 rounded-full bg-red-500 mr-2"></span>
                      <span class="text-base text-gray-400">Critical</span>
                    </div>
                    <span class="font-medium text-red-400 text-lg">1.5 วัน</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <div class="flex items-center">
                      <span class="w-4 h-4 rounded-full bg-orange-500 mr-2"></span>
                      <span class="text-base text-gray-400">Major</span>
                    </div>
                    <span class="font-medium text-orange-400 text-lg">2.4 วัน</span>
                  </div>
                  <div class="flex justify-between items-center">
                    <div class="flex items-center">
                      <span class="w-4 h-4 rounded-full bg-blue-500 mr-2"></span>
                      <span class="text-base text-gray-400">Minor</span>
                    </div>
                    <span class="font-medium text-blue-400 text-lg">3.8 วัน</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
          
          <!-- Insights Section -->
          <div class="mb-0">
            <div class="bg-gray-800/50 rounded-xl p-6 border border-gray-700">
              <h4 class="text-lg font-semibold text-white mb-4 flex items-center">
                <i class="ri-lightbulb-flash-line mr-2 text-amber-400"></i>
                ข้อมูลเชิงลึกและคำแนะนำ
              </h4>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="flex">
                  <div class="flex-shrink-0 w-10 h-10 rounded-full bg-emerald-900/30 flex items-center justify-center mr-3">
                    <i class="ri-arrow-up-line text-emerald-400"></i>
                  </div>
                  <div>
                    <p class="text-base text-gray-300">ระยะเวลาการแก้ไขปัญหาลดลง <span class="font-medium text-emerald-400">12.9%</span> เมื่อเทียบกับ Sprint ก่อนหน้า</p>
                  </div>
                </div>
                <div class="flex">
                  <div class="flex-shrink-0 w-10 h-10 rounded-full bg-amber-900/30 flex items-center justify-center mr-3">
                    <i class="ri-focus-3-line text-amber-400"></i>
                  </div>
                  <div>
                    <p class="text-base text-gray-300">ทีมควรมุ่งเน้นที่การแก้ไขปัญหาที่มีความรุนแรงระดับ <span class="font-medium text-amber-400">Critical</span> ซึ่งมีระยะเวลาการแก้ไขสูงกว่าเป้าหมาย</p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>     </div>
</div>
    <!-- JavaScript for Cards -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // Animation for numbers
        document.querySelectorAll('.count-animation').forEach(element => {
          const countTo = parseInt(element.getAttribute('data-count'));
          let count = 0;
          const interval = setInterval(() => {
            const increment = Math.ceil(countTo / 20);
            count = Math.min(count + increment, countTo);
            element.textContent = count.toFixed(countTo % 1 > 0 ? 1 : 0);
            if (count >= countTo) {
              clearInterval(interval);
            }
          }, 50);
        });
        
        // Initialize progress bars
        document.querySelectorAll('[data-progress]').forEach(bar => {
          const percentage = bar.getAttribute('data-progress');
          setTimeout(() => {
            bar.style.width = percentage + '%';
          }, 300);
        });
        
        // Dropdown toggle functionality
        document.querySelectorAll('.dropdown-toggle').forEach(button => {
          button.addEventListener('click', function() {
            const dropdownMenu = this.nextElementSibling;
            if (dropdownMenu.classList.contains('hidden')) {
              document.querySelectorAll('.dropdown-menu').forEach(menu => {
                menu.classList.add('hidden');
              });
              dropdownMenu.classList.remove('hidden');
            } else {
              dropdownMenu.classList.add('hidden');
            }
          });
        });
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
          if (!event.target.closest('.dropdown')) {
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
              menu.classList.add('hidden');
            });
          }
        });
        
        // Add shimmer animation
        if (!document.querySelector('#shimmer-animation')) {
          const style = document.createElement('style');
          style.id = 'shimmer-animation';
          style.textContent = `
            @keyframes shimmer {
              0% {
                transform: translateX(-100%);
              }
              100% {
                transform: translateX(100%);
              }
            }
            .animate-shimmer {
              animation: shimmer 2s infinite;
            }
          `;
          document.head.appendChild(style);
        }
      });
    </script>
    <!-- End: Test Summary -->      
      <!-- Test Trend Analysis -->
    <!-- Start: Advanced Test Trend Analysis -->
    <div class="bg-gradient-to-b from-gray-900 to-black rounded-xl border border-gray-800/80 p-8 shadow-xl shadow-black/20 mb-8 backdrop-blur-sm hover:shadow-2xl transition-all duration-500 relative overflow-hidden">
      <!-- Background Effects -->
      <div class="absolute inset-0 pointer-events-none overflow-hidden">
        <div class="absolute top-0 left-0 w-full h-full bg-pattern-grid opacity-5"></div>
        <div class="absolute -top-24 -right-24 w-96 h-96 bg-indigo-900/20 rounded-full blur-3xl"></div>
        <div class="absolute -bottom-24 -left-24 w-96 h-96 bg-blue-900/20 rounded-full blur-3xl"></div>
        <div class="absolute top-1/4 left-1/3 w-12 h-12 bg-indigo-600/30 rounded-full blur-xl animate-pulse"></div>
        <div class="absolute bottom-1/3 right-1/4 w-8 h-8 bg-blue-600/30 rounded-full blur-xl animate-pulse" style="animation-delay: 1s;"></div>
      </div>
      
      <div class="relative z-10">
        <!-- Header Section with Filter Controls -->
        <div class="flex flex-col lg:flex-row justify-between items-start lg:items-center mb-8 border-b border-gray-700/80 pb-6">
          <div>
            <div class="flex items-center space-x-3">
              <div class="bg-gradient-to-r from-indigo-600 to-blue-700 p-2.5 rounded-lg shadow-lg shadow-indigo-500/20 group-hover:shadow-indigo-500/40 transition duration-300">
                <i class="ri-line-chart-line text-white text-xl"></i>
              </div>
              <div>
                <h2 class="text-2xl font-bold text-white tracking-tight group-hover:text-transparent group-hover:bg-clip-text group-hover:bg-gradient-to-r group-hover:from-indigo-400 group-hover:to-blue-400 transition-all duration-500">Test Trend Analysis</h2>
                <p class="text-sm text-gray-400 mt-1">แนวโน้มการทดสอบและข้อบกพร่องตามระยะเวลา</p>
              </div>
            </div>
          </div>
          
          <!-- Filter Controls with enhanced UI -->
          <div class="flex flex-col space-y-3 md:space-y-0 md:flex-row md:space-x-3 mt-4 lg:mt-0 w-full lg:w-auto">
            <!-- Date Range Selector -->
            <div class="dropdown relative">
              <button class="dropdown-toggle w-full md:w-auto text-sm bg-gray-800/80 hover:bg-gray-700/90 border border-gray-700 text-gray-200 px-4 py-2 rounded-lg transition-colors flex items-center justify-between space-x-1 shadow-sm focus:ring-2 focus:ring-indigo-500/50 focus:outline-none">
                <div class="flex items-center">
                  <i class="ri-calendar-line mr-2 text-indigo-400"></i>
                  <span>Sprint </span>
                </div>
                <i class="ri-arrow-down-s-line ml-2"></i>
              </button>
              <div class="dropdown-menu hidden py-2 rounded-lg bg-gray-800/90 backdrop-blur-sm border border-gray-700 w-full md:w-48 shadow-lg z-10 absolute left-0 md:right-0 mt-1">
                <p class="px-4 py-1 text-xs text-gray-400 border-b border-gray-700/50">Select Sprint</p>
                <a href="#" class="block text-sm py-2.5 px-4 text-gray-300 hover:bg-gray-700/70 hover:text-white transition-colors flex items-center">
                  <i class="ri-check-line mr-2 text-indigo-500"></i>
                  <span>Sprint  (Current)</span>
                </a>
                <a href="#" class="block text-sm py-2.5 px-4 text-gray-300 hover:bg-gray-700/70 hover:text-white transition-colors flex items-center">
                  <i class="ri-git-branch-line mr-2 text-gray-500"></i>
                  <span>Previous Sprint</span>
                </a>
                <a href="#" class="block text-sm py-2.5 px-4 text-gray-300 hover:bg-gray-700/70 hover:text-white transition-colors flex items-center">
                  <i class="ri-calendar-2-line mr-2 text-gray-500"></i>
                  <span>Select Custom Period</span>
                </a>
              </div>
            </div>
            
            <!-- Period Selector -->
            <div class="relative">
              <div class="flex flex-wrap gap-1 border border-gray-700 rounded-lg overflow-hidden bg-gray-800/80 p-0.5">
                <button class="period-btn text-xs px-4 py-2 bg-gradient-to-r from-indigo-600 to-blue-600 text-white font-medium rounded transition-all duration-300 shadow-lg shadow-indigo-900/30" data-period="7">7 วัน</button>
                <button class="period-btn text-xs px-4 py-2 bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-white font-medium rounded transition-all duration-300" data-period="14">14 วัน</button>
                <button class="period-btn text-xs px-4 py-2 bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-white font-medium rounded transition-all duration-300" data-period="30">30 วัน</button>
                <button class="period-btn text-xs px-4 py-2 bg-gray-800 text-gray-300 hover:bg-gray-700 hover:text-white font-medium rounded transition-all duration-300" data-period="90">90 วัน</button>
              </div>
            </div>
            
            <!-- Export & Settings -->
            <div class="flex items-center space-x-2">
              <button class="trend-download-btn bg-gray-800/80 hover:bg-gray-700/90 text-gray-300 hover:text-white rounded-lg p-2 transition-colors border border-gray-700 flex items-center justify-center tooltip-trigger focus:ring-2 focus:ring-indigo-500/50 focus:outline-none relative group" aria-label="Export data">
                <i class="ri-download-2-line text-sm"></i>
                <div class="tooltip-content hidden group-hover:block absolute -top-9 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-800 text-xs text-gray-300 rounded whitespace-nowrap border border-gray-700">
                  Export Chart
                </div>
              </button>
              <button class="bg-gray-800/80 hover:bg-gray-700/90 text-gray-300 hover:text-white rounded-lg p-2 transition-colors border border-gray-700 flex items-center justify-center tooltip-trigger focus:ring-2 focus:ring-indigo-500/50 focus:outline-none relative group" aria-label="Chart settings">
                <i class="ri-settings-4-line text-sm"></i>
                <div class="tooltip-content hidden group-hover:block absolute -top-9 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-800 text-xs text-gray-300 rounded whitespace-nowrap border border-gray-700">
                  Chart Settings
                </div>
              </button>
              <button class="bg-gray-800/80 hover:bg-gray-700/90 text-gray-300 hover:text-white rounded-lg p-2 transition-colors border border-gray-700 flex items-center justify-center tooltip-trigger focus:ring-2 focus:ring-indigo-500/50 focus:outline-none relative group" aria-label="Refresh data">
                <i class="ri-refresh-line text-sm"></i>
                <div class="tooltip-content hidden group-hover:block absolute -top-9 left-1/2 -translate-x-1/2 px-2 py-1 bg-gray-800 text-xs text-gray-300 rounded whitespace-nowrap border border-gray-700">
                  Refresh Data
                </div>
              </button>
            </div>
          </div>
        </div>

        <!-- Enhanced KPI Cards -->
        <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
          <!-- Test Execution -->
          <div class="relative group">
            <!-- Glow Effect -->
            <div class="absolute -inset-0.5 bg-gradient-to-r from-blue-700/40 to-indigo-700/40 rounded-xl blur opacity-30 group-hover:opacity-70 transition duration-500 group-hover:duration-200"></div>
            <!-- Main Card -->
            <div class="relative bg-gray-900/90 backdrop-blur-sm rounded-xl p-5 shadow-xl border border-gray-800/80 hover:border-indigo-800/30 transition-all duration-300 h-full overflow-hidden">
              <!-- Floating particles -->
              <div class="absolute top-1/4 right-1/4 w-1.5 h-1.5 rounded-full bg-indigo-500/30 animate-float"></div>
              <div class="absolute bottom-1/4 left-1/3 w-1 h-1 rounded-full bg-blue-500/30 animate-float-delayed"></div>
              <div class="absolute top-1/3 right-1/3 w-1 h-1 rounded-full bg-indigo-500/30 animate-float-slow"></div>
              
              <div class="flex items-center mb-2 justify-between">
                <span class="text-sm font-medium text-gray-400">Test Cases Executed</span>
                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-blue-600/90 to-indigo-600/90 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-blue-500/30">
                  <i class="ri-checkbox-circle-line text-white text-xl"></i>
                </div>
              </div>
              <div class="mt-3 flex items-baseline justify-between">
                <div>
                  <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-400 to-indigo-400 count-animation neon-text" data-count="">0</div>
                  <div class="text-xs text-gray-400 mt-1.5">Tests executed</div>
                </div>
                <span class="text-xs font-medium text-emerald-400 bg-emerald-900/30 px-2 py-1 rounded-full flex items-center border border-emerald-900/30">
                  <i class="ri-arrow-up-s-line mr-0.5"></i>+
                </span>
              </div>
              
              <!-- Mini Sparkline Chart -->
              <div class="w-full h-8 mt-3">
                <svg class="w-full h-full" viewBox="0 0 100 25" preserveAspectRatio="none">
                  <path d="M0,25 L5,20 L10,22 L15,18 L20,15 L25,20 L30,18 L35,16 L40,12 L45,15 L50,10 L55,14 L60,8 L65,12 L70,5 L75,9 L80,3 L85,7 L90,2 L95,5 L100,0" 
                        fill="none" 
                        stroke="rgba(99, 102, 241, 0.5)" 
                        stroke-width="1.5" 
                        class="trend-path"
                        stroke-dasharray="200" 
                        stroke-dashoffset="200">
                  </path>
                </svg>
              </div>
            </div>
          </div>

          <!-- Test Coverage -->
          <div class="relative group">
            <!-- Glow Effect -->
            <div class="absolute -inset-0.5 bg-gradient-to-r from-indigo-700/40 to-purple-700/40 rounded-xl blur opacity-30 group-hover:opacity-70 transition duration-500 group-hover:duration-200"></div>
            <!-- Main Card -->
            <div class="relative bg-gray-900/90 backdrop-blur-sm rounded-xl p-5 shadow-xl border border-gray-800/80 hover:border-purple-800/30 transition-all duration-300 h-full overflow-hidden">
              <!-- Floating particles -->
              <div class="absolute top-1/4 right-1/4 w-1.5 h-1.5 rounded-full bg-purple-500/30 animate-float"></div>
              <div class="absolute bottom-1/3 left-1/4 w-1 h-1 rounded-full bg-indigo-500/30 animate-float-delayed"></div>
              <div class="absolute top-1/3 right-1/2 w-1 h-1 rounded-full bg-purple-500/30 animate-float-slow"></div>
              
              <div class="flex items-center mb-2 justify-between">
                <span class="text-sm font-medium text-gray-400">Test Coverage</span>
                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-indigo-600/90 to-purple-600/90 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-indigo-500/30">
                  <i class="ri-shield-check-line text-white text-xl"></i>
                </div>
              </div>
              <div class="mt-3 flex items-baseline justify-between">
                <div>
                  <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-indigo-400 to-purple-400 count-animation neon-text" data-count="">0</div>
                  <div class="text-xs text-gray-400 mt-1.5">% coverage</div>
                </div>
                <span class="text-xs font-medium text-emerald-400 bg-emerald-900/30 px-2 py-1 rounded-full flex items-center border border-emerald-900/30">
                  <i class="ri-arrow-up-s-line mr-0.5"></i>+%
                </span>
              </div>
              
              <!-- Circular Progress Indicator -->
              <div class="w-full h-8 mt-3 flex items-center justify-start">
                <div class="relative">
                  <svg class="w-8 h-8" viewBox="0 0 36 36">
                    <circle cx="18" cy="18" r="16" fill="none" stroke="rgba(79, 70, 229, 0.2)" stroke-width="3"></circle>
                    <circle cx="18" cy="18" r="16" fill="none" stroke="rgba(139, 92, 246, 0.8)" stroke-width="3" 
                        stroke-dasharray="100" stroke-dashoffset="25" transform="rotate(-90 18 18)" class="circle-animation">
                    </circle>
                  </svg>
                  <div class="absolute inset-0 flex items-center justify-center text-[10px] font-medium text-purple-400">75%</div>
                </div>
                <div class="w-full h-2 bg-gray-800 rounded-full ml-2 overflow-hidden">
                  <div class="h-full bg-gradient-to-r from-indigo-600 to-purple-600 rounded-full" style="width: 75%" class="bar-animation"></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Defects Opened -->
          <div class="relative group">
            <!-- Glow Effect -->
            <div class="absolute -inset-0.5 bg-gradient-to-r from-red-700/40 to-pink-700/40 rounded-xl blur opacity-30 group-hover:opacity-70 transition duration-500 group-hover:duration-200"></div>
            <!-- Main Card -->
            <div class="relative bg-gray-900/90 backdrop-blur-sm rounded-xl p-5 shadow-xl border border-gray-800/80 hover:border-red-800/30 transition-all duration-300 h-full overflow-hidden">
              <!-- Floating particles -->
              <div class="absolute top-1/3 right-1/5 w-1.5 h-1.5 rounded-full bg-red-500/30 animate-float"></div>
              <div class="absolute bottom-1/4 left-1/4 w-1 h-1 rounded-full bg-pink-500/30 animate-float-delayed"></div>
              <div class="absolute top-1/2 right-1/3 w-1 h-1 rounded-full bg-red-500/30 animate-float-slow"></div>
              
              <div class="flex items-center mb-2 justify-between">
                <span class="text-sm font-medium text-gray-400">Defects Opened</span>
                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-red-600/90 to-pink-600/90 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-red-500/30">
                  <i class="ri-bug-line text-white text-xl"></i>
                </div>
              </div>
              <div class="mt-3 flex items-baseline justify-between">
                <div>
                  <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-red-400 to-pink-400 count-animation neon-text" data-count="">0</div>
                  <div class="text-xs text-gray-400 mt-1.5">Defects found</div>
                </div>
                <span class="text-xs font-medium text-amber-400 bg-amber-900/30 px-2 py-1 rounded-full flex items-center border border-amber-900/30">
                  <i class="ri-add-line mr-0.5"></i>+
                </span>
              </div>
              
              <!-- Mini Bar Chart -->
              <div class="w-full h-8 mt-3 flex items-end space-x-1 px-1">
                <div class="w-1/9 h-3/6 bg-gradient-to-t from-red-600 to-red-500 rounded-sm opacity-60"></div>
                <div class="w-1/9 h-4/6 bg-gradient-to-t from-red-600 to-red-500 rounded-sm opacity-70"></div>
                <div class="w-1/9 h-5/6 bg-gradient-to-t from-red-600 to-red-500 rounded-sm opacity-80"></div>
                <div class="w-1/9 h-3/6 bg-gradient-to-t from-red-600 to-red-500 rounded-sm opacity-60"></div>
                <div class="w-1/9 h-4/6 bg-gradient-to-t from-red-600 to-red-500 rounded-sm opacity-70"></div>
                <div class="w-1/9 h-5/6 bg-gradient-to-t from-red-600 to-red-500 rounded-sm opacity-80"></div>
                <div class="w-1/9 h-full bg-gradient-to-t from-red-600 to-red-500 rounded-sm"></div>
                <div class="w-1/9 h-5/6 bg-gradient-to-t from-red-600 to-red-500 rounded-sm opacity-80"></div>
                <div class="w-1/9 h-4/6 bg-gradient-to-t from-red-600 to-red-500 rounded-sm opacity-70"></div>
              </div>
            </div>
          </div>

          <!-- Defects Closed -->
          <div class="relative group">
            <!-- Glow Effect -->
            <div class="absolute -inset-0.5 bg-gradient-to-r from-green-700/40 to-emerald-700/40 rounded-xl blur opacity-30 group-hover:opacity-70 transition duration-500 group-hover:duration-200"></div>
            <!-- Main Card -->
            <div class="relative bg-gray-900/90 backdrop-blur-sm rounded-xl p-5 shadow-xl border border-gray-800/80 hover:border-green-800/30 transition-all duration-300 h-full overflow-hidden">
              <!-- Floating particles -->
              <div class="absolute top-1/4 right-1/4 w-1.5 h-1.5 rounded-full bg-green-500/30 animate-float"></div>
              <div class="absolute bottom-1/3 left-1/4 w-1 h-1 rounded-full bg-emerald-500/30 animate-float-delayed"></div>
              <div class="absolute top-1/2 right-1/3 w-1 h-1 rounded-full bg-green-500/30 animate-float-slow"></div>
              
              <div class="flex items-center mb-2 justify-between">
                <span class="text-sm font-medium text-gray-400">Defects Closed</span>
                <div class="w-10 h-10 rounded-full bg-gradient-to-br from-green-600/90 to-emerald-600/90 flex items-center justify-center group-hover:scale-110 transition-transform duration-300 shadow-lg shadow-green-500/30">
                  <i class="ri-check-double-line text-white text-xl"></i>
                </div>
              </div>
              <div class="mt-3 flex items-baseline justify-between">
                <div>
                  <div class="text-3xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-green-400 to-emerald-400 count-animation neon-text" data-count="126">0</div>
                  <div class="text-xs text-gray-400 mt-1.5">Defects fixed</div>
                </div>
                <span class="text-xs font-medium text-emerald-400 bg-emerald-900/30 px-2 py-1 rounded-full flex items-center border border-emerald-900/30">
                  <i class="ri-subtract-line mr-0.5"></i>+
                </span>
              </div>
              
              <!-- Resolution Rate Meter -->
              <div class="w-full mt-3 flex items-center space-x-2">
                <div class="text-[10px] font-medium text-gray-500">0%</div>
                <div class="flex-1 h-2 bg-gray-800 rounded-full overflow-hidden">
                  <div class="h-full bg-gradient-to-r from-green-600 to-emerald-500" style="width: 82%" class="bar-animation"></div>
                </div>
                <div class="text-[10px] font-medium text-emerald-500">82%</div>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Chart Container -->
        <div class="bg-gray-900 rounded-xl p-6 shadow-2xl border border-gray-800 hover:shadow-2xl transition-all duration-300 mb-4 z-0">
          <div class="flex flex-wrap justify-between items-center mb-4">
            <h3 class="text-base font-semibold text-white flex items-center">
              <i class="ri-line-chart-line text-indigo-400 mr-2"></i>
              Daily Test Progress
            </h3>
            <div class="flex space-x-2 mt-2 sm:mt-0">
              <div class="text-xs font-medium text-gray-400 bg-gray-800 rounded-full px-3 py-1 flex items-center">
                <i class="ri-calendar-check-line mr-1"></i>
                <span class="trend-date-range">2025-02-01 - 2025-04-29</span>
              </div>
              <button class="trend-download-btn bg-gray-800 hover:bg-gray-700 text-gray-300 rounded-full p-1.5 transition-colors">
                <i class="ri-download-2-line"></i>
              </button>
            </div>
          </div>
          
          <div class="h-[400px] relative rounded-lg p-2">
            <canvas id="trendChart" class="chart-canvas w-full h-full"></canvas>
            <!-- Loading placeholder -->
            <div id="chartLoading" class="absolute inset-0 bg-gray-900/80 backdrop-blur-sm flex items-center justify-center">
              <div class="flex flex-col items-center">
                <div class="w-12 h-12 rounded-full border-4 border-indigo-900 border-t-indigo-400 animate-spin"></div>
                <p class="mt-3 text-sm text-gray-400">กำลังโหลดข้อมูล...</p>
              </div>
            </div>
          </div>

          <!-- Chart Legend -->
          <div class="mt-5 flex flex-wrap justify-center gap-x-4 gap-y-3 bg-gray-800/50 rounded-xl p-3 border border-gray-700 shadow-sm">
            <div class="flex items-center">
              <span class="inline-block w-4 h-4 mr-2 rounded-full bg-[rgb(59,130,246)] ring-2 ring-gray-900 shadow-sm"></span>
              <span class="text-sm font-medium text-gray-300">Test Cases Executed</span>
              <span class="ml-1 text-xs text-gray-400">(Count)</span>
            </div>
            <div class="flex items-center">
              <span class="inline-block w-4 h-4 mr-2 rounded-full bg-[rgb(244,63,94)] ring-2 ring-gray-900 shadow-sm"></span>
              <span class="text-sm font-medium text-gray-300">Defects Opened</span>
              <span class="ml-1 text-xs text-gray-400">(Count)</span>
            </div>
            <div class="flex items-center">
              <span class="inline-block w-4 h-4 mr-2 rounded-full bg-[rgb(16,185,129)] ring-2 ring-gray-900 shadow-sm"></span>
              <span class="text-sm font-medium text-gray-300">Defects Closed</span>
              <span class="ml-1 text-xs text-gray-400">(Count)</span>
            </div>
            <div class="flex items-center">
              <span class="inline-block w-4 h-4 mr-2 rounded-full bg-[rgb(139,92,246)] ring-2 ring-gray-900 shadow-sm"></span>
              <span class="text-sm font-medium text-gray-300">Test Coverage</span>
              <span class="ml-1 text-xs text-purple-400">(%)</span>
            </div>
          </div>
          
          <!-- ข้อความอธิบายกราฟ -->
          <div class="mt-2 text-xs text-gray-500 text-center italic">
            <span>* Test Coverage แสดงผลบนแกน Y ด้านขวา (เปอร์เซ็นต์), ส่วนอื่นๆ แสดงผลบนแกน Y ด้านซ้าย (จำนวน)</span>
          </div>
        </div>

        <!-- Insights Panel -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 z-0">
          <!-- Insights & Recommendations -->
          <div class="bg-gray-900 border border-gray-800 rounded-xl p-5 shadow-2xl z-0">
            <div class="flex items-center mb-4">
              <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-blue-400 to-indigo-600 flex items-center justify-center shadow-md text-white">
                <i class="ri-lightbulb-flash-line text-xl"></i>
              </div>
              <h3 class="ml-3 text-base font-semibold text-white">Insights & Recommendations</h3>
            </div>
            
            <ul class="space-y-3">
              <li class="flex items-start">
                <div class="mt-0.5 flex-shrink-0 w-5 h-5 rounded-full bg-indigo-900/50 flex items-center justify-center">
                  <i class="ri-checkbox-circle-fill text-indigo-400 text-sm"></i>
                </div>
                <span class="ml-2 text-sm text-gray-300">Test coverage  จาก % เป็น % ในช่วง  วันที่ผ่านมา</span>
              </li>
              <li class="flex items-start">
                <div class="mt-0.5 flex-shrink-0 w-5 h-5 rounded-full bg-green-900/50 flex items-center justify-center">
                  <i class="ri-checkbox-circle-fill text-green-400 text-sm"></i>
                </div>
                <span class="ml-2 text-sm text-gray-300">มีการแก้ไข defects เสร็จสิ้น % ของ defects ที่เปิดทั้งหมด (126/)</span>
              </li>
              <li class="flex items-start">
                <div class="mt-0.5 flex-shrink-0 w-5 h-5 rounded-full bg-amber-900/50 flex items-center justify-center">
                  <i class="ri-alert-line text-amber-400 text-sm"></i>
                </div>
                <span class="ml-2 text-sm text-gray-300">Module ที่มี defects มากที่สุดคือ <strong class="text-amber-400"></strong> ( defects)</span>
              </li>
              <li class="flex items-start">
                <div class="mt-0.5 flex-shrink-0 w-5 h-5 rounded-full bg-red-900/50 flex items-center justify-center">
                  <i class="ri-focus-3-fill text-red-400 text-sm"></i>
                </div>
                <span class="ml-2 text-sm text-gray-300">ควรเร่งแก้ไข critical defects จำนวน  รายการที่ยังไม่ได้แก้ไข</span>
              </li>
            </ul>
          </div>
          
          <!-- Average Metrics -->
          <div class="bg-gray-900 border border-gray-800 rounded-xl p-5 shadow-2xl z-0">
            <div class="flex items-center mb-4">
              <div class="w-10 h-10 rounded-lg bg-gradient-to-br from-emerald-400 to-green-600 flex items-center justify-center shadow-md text-white">
                <i class="ri-calculator-line text-xl"></i>
              </div>
              <h3 class="ml-3 text-base font-semibold text-white">Trend Metrics</h3>
            </div>
            
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-gray-800/50 rounded-xl p-4">
                <p class="text-xs text-gray-400 mb-2">Test Velocity</p>
                <div class="flex items-baseline">
                  <span class="text-2xl font-bold text-white"></span>
                  <span class="ml-1 text-sm text-gray-400">tests/day</span>
                </div>
                <div class="flex items-center mt-2 text-xs">
                  <div class="flex-1 bg-gray-700 h-1.5 rounded-full overflow-hidden">
                    <div class="bg-blue-500 h-full rounded-full" style="width: %"></div>
                  </div>
                  <span class="ml-2 text-gray-400">%</span>
                </div>
              </div>
              
              <div class="bg-gray-800/50 rounded-xl p-4">
                <p class="text-xs text-gray-400 mb-2">Defect Rate</p>
                <div class="flex items-baseline">
                  <span class="text-2xl font-bold text-white"></span>
                  <span class="ml-1 text-sm text-gray-400">per 100 tests</span>
                </div>
                <div class="flex items-center mt-2 text-xs">
                  <div class="flex-1 bg-gray-700 h-1.5 rounded-full overflow-hidden">
                    <div class="bg-amber-500 h-full rounded-full" style="width: %"></div>
                  </div>
                  <span class="ml-2 text-gray-400">%</span>
                </div>
              </div>
              
              <div class="bg-gray-800/50 rounded-xl p-4">
                <p class="text-xs text-gray-400 mb-2">Time to Fix</p>
                <div class="flex items-baseline">
                  <span class="text-2xl font-bold text-white"></span>
                  <span class="ml-1 text-sm text-gray-400">days avg.</span>
                </div>
                <div class="flex items-center mt-2 text-xs">
                  <div class="flex-1 bg-gray-700 h-1.5 rounded-full overflow-hidden">
                    <div class="bg-green-500 h-full rounded-full" style="width: %"></div>
                  </div>
                  <span class="ml-2 text-gray-400">%</span>
                </div>
              </div>
              
              <div class="bg-gray-800/50 rounded-xl p-4">
                <p class="text-xs text-gray-400 mb-2">Coverage Growth</p>
                <div class="flex items-baseline">
                  <span class="text-2xl font-bold text-white"></span>
                  <span class="ml-1 text-sm text-gray-400">% per day</span>
                </div>
                <div class="flex items-center mt-2 text-xs">
                  <div class="flex-1 bg-gray-700 h-1.5 rounded-full overflow-hidden">
                    <div class="bg-purple-500 h-full rounded-full" style="width: %"></div>
                  </div>
                  <span class="ml-2 text-gray-400">%</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Footer -->
        <div class="mt-6 flex flex-wrap justify-between items-center text-xs text-gray-400">
          <p class="flex items-center">
            <i class="ri-information-line mr-1"></i>
            <span>ข้อมูลอัพเดทอัตโนมัติทุกวันเวลา 00:00 น. (ICT)</span>
          </p>
          <p class="flex items-center mt-2 sm:mt-0">
            <i class="ri-time-line mr-1"></i>
            <span>อัพเดทล่าสุด: </span>
          </p>
        </div>
      </div>
    </div>

    <!-- JavaScript for Test Trend Chart -->
    <script>
      document.addEventListener('DOMContentLoaded', function() {
        // ซ่อน loading หลังจากโหลดกราฟเสร็จ
        setTimeout(() => {
          const chartLoading = document.getElementById('chartLoading');
          if (chartLoading) {
            chartLoading.classList.add('opacity-0');
            setTimeout(() => chartLoading.style.display = 'none', 500);
          }
        }, 1000);
        
        // Animation for numbers
        document.querySelectorAll('.count-animation').forEach(element => {
          const countTo = parseInt(element.getAttribute('data-count'));
          let count = 0;
          const interval = setInterval(() => {
            const increment = Math.ceil(countTo / 20);
            count = Math.min(count + increment, countTo);
            element.textContent = count.toFixed(countTo % 1 > 0 ? 1 : 0);
            if (count >= countTo) {
              clearInterval(interval);
            }
          }, 50);
        });
        
        // ตั้งค่า Progress Bar
        document.querySelectorAll('.progress-bar').forEach(bar => {
          const percentage = bar.getAttribute('data-percentage') || 0;
          setTimeout(() => {
            bar.style.width = percentage + '%';
          }, 300);
        });
        
        // ตั้งค่าปุ่มเลือกช่วงเวลา
        document.querySelectorAll('.period-btn').forEach(btn => {
          btn.addEventListener('click', function() {
            document.querySelectorAll('.period-btn').forEach(b => {
              b.classList.remove('bg-indigo-600', 'text-white');
              b.classList.add('bg-gray-800', 'text-gray-300', 'hover:bg-gray-700');
            });
            this.classList.remove('bg-gray-800', 'text-gray-300', 'hover:bg-gray-700');
            this.classList.add('bg-indigo-600', 'text-white');
            
            // ในอนาคตจะเพิ่มการเรียก API เพื่อดึงข้อมูลตามช่วงเวลา
            const period = this.getAttribute('data-period');
            updateChart(period);
          });
        });
        
        // ตั้งค่าปุ่มดาวน์โหลดกราฟ
        document.querySelector('.trend-download-btn').addEventListener('click', function() {
          // ฟังก์ชันดาวน์โหลดกราฟเป็น PNG
          const canvas = document.getElementById('trendChart');
          if (canvas) {
            const image = canvas.toDataURL('image/png');
            const link = document.createElement('a');
            link.download = 'test-trend-analysis.png';
            link.href = image;
            link.click();
          }
        });
        
        // Dropdown toggle functionality
        document.querySelectorAll('.dropdown-toggle').forEach(button => {
          button.addEventListener('click', function() {
            const dropdownMenu = this.nextElementSibling;
            if (dropdownMenu.classList.contains('hidden')) {
              document.querySelectorAll('.dropdown-menu').forEach(menu => {
                menu.classList.add('hidden');
              });
              dropdownMenu.classList.remove('hidden');
            } else {
              dropdownMenu.classList.add('hidden');
            }
          });
        });
        
        // Close dropdowns when clicking outside
        document.addEventListener('click', function(event) {
          if (!event.target.closest('.dropdown')) {
            document.querySelectorAll('.dropdown-menu').forEach(menu => {
              menu.classList.add('hidden');
            });
          }
        });
        
        // Add shimmer animation
        if (!document.querySelector('#shimmer-animation')) {
          const style = document.createElement('style');
          style.id = 'shimmer-animation';
          style.textContent = `
            @keyframes shimmer {
              0% {
                transform: translateX(-100%);
              }
              100% {
                transform: translateX(100%);
              }
            }
            .animate-shimmer {
              animation: shimmer 2s infinite;
            }
          `;
          document.head.appendChild(style);
        }
        
        // สร้างกราฟด้วย Chart.js
        const createTrendChart = () => {
          const ctx = document.getElementById('trendChart').getContext('2d');
          
          // สร้าง gradient สำหรับพื้นหลังกราฟเส้น
          const blueGradient = ctx.createLinearGradient(0, 0, 0, 400);
          blueGradient.addColorStop(0, 'rgba(59, 130, 246, 0.2)');
          blueGradient.addColorStop(1, 'rgba(59, 130, 246, 0.0)');
          
          const redGradient = ctx.createLinearGradient(0, 0, 0, 400);
          redGradient.addColorStop(0, 'rgba(244, 63, 94, 0.2)');
          redGradient.addColorStop(1, 'rgba(244, 63, 94, 0.0)');
          
          const greenGradient = ctx.createLinearGradient(0, 0, 0, 400);
          greenGradient.addColorStop(0, 'rgba(16, 185, 129, 0.2)');
          greenGradient.addColorStop(1, 'rgba(16, 185, 129, 0.0)');
          
          const purpleGradient = ctx.createLinearGradient(0, 0, 0, 400);
          purpleGradient.addColorStop(0, 'rgba(139, 92, 246, 0.2)');
          purpleGradient.addColorStop(1, 'rgba(139, 92, 246, 0.0)');
          
          // ค่าที่ควรจะได้รับจาก template
          let trendLabels = [];
          let trendTestCasesExecuted = [];
          let trendDefectsOpened = [];
          let trendDefectsClosed = [];
          let trendTestCoverage = [];
          
          // สร้างข้อมูลตัวอย่างหากไม่มีข้อมูลจริง
          if (!trendLabels || trendLabels.length === 0) {
            trendLabels = ['วันที่ 1', 'วันที่ 2', 'วันที่ 3', 'วันที่ 4', 'วันที่ 5', 'วันที่ 6', 'วันที่ 7'];
            trendTestCasesExecuted = [10, 25, 30, 42, 50, 65, 75];
            trendDefectsOpened = [2, 4, 3, 5, 4, 6, 4];
            trendDefectsClosed = [1, 2, 3, 2, 4, 3, 5];
            trendTestCoverage = [10, 25, 30, 42, 50, 65, 75];
          }
          
          // สร้างกราฟด้วย Chart.js
          const trendChart = new Chart(ctx, {
            type: 'line',
            data: {
              labels: trendLabels,
              datasets: [
                {
                  label: 'Test Cases Executed',
                  data: trendTestCasesExecuted,
                  borderColor: 'rgb(59, 130, 246)',
                  backgroundColor: blueGradient,
                  borderWidth: 2,
                  pointBackgroundColor: 'rgb(255, 255, 255)',
                  pointBorderColor: 'rgb(59, 130, 246)',
                  pointBorderWidth: 2,
                  pointRadius: 4,
                  pointHoverRadius: 6,
                  yAxisID: 'y',
                  tension: 0.3,
                  fill: true,
                  order: 1
                },
                {
                  label: 'Defects Opened',
                  data: trendDefectsOpened,
                  borderColor: 'rgb(244, 63, 94)',
                  backgroundColor: redGradient,
                  borderWidth: 2,
                  pointBackgroundColor: 'rgb(255, 255, 255)',
                  pointBorderColor: 'rgb(244, 63, 94)',
                  pointBorderWidth: 2,
                  pointRadius: 4,
                  pointHoverRadius: 6,
                  yAxisID: 'y',
                  tension: 0.3,
                  fill: true,
                  order: 3
                },
                {
                  label: 'Defects Closed',
                  data: trendDefectsClosed,
                  borderColor: 'rgb(16, 185, 129)',
                  backgroundColor: greenGradient,
                  borderWidth: 2,
                  pointBackgroundColor: 'rgb(255, 255, 255)',
                  pointBorderColor: 'rgb(16, 185, 129)',
                  pointBorderWidth: 2,
                  pointRadius: 4,
                  pointHoverRadius: 6,
                  yAxisID: 'y',
                  tension: 0.3,
                  fill: true,
                  order: 2
                },
                {
                  label: 'Test Coverage (%)',
                  data: trendTestCoverage,
                  borderColor: 'rgb(139, 92, 246)',
                  backgroundColor: purpleGradient,
                  borderWidth: 2,
                  pointBackgroundColor: 'rgb(255, 255, 255)',
                  pointBorderColor: 'rgb(139, 92, 246)',
                  pointBorderWidth: 2,
                  pointRadius: 4,
                  pointHoverRadius: 6,
                  yAxisID: 'y1',
                  tension: 0.3,
                  fill: false,
                  order: 0
                }
              ]
            },
            options: {
              responsive: true,
              maintainAspectRatio: false,
              interaction: {
                mode: 'index',
                intersect: false,
              },
              hover: {
                mode: 'nearest',
                intersect: true
              },
              animations: {
                tension: {
                  duration: 1000,
                  easing: 'linear',
                  from: 0.4,
                  to: 0.3,
                  loop: false
                }
              },
              scales: {
                y: {
                  beginAtZero: true,
                  position: 'left',
                  grid: {
                    drawBorder: false,
                    color: 'rgba(75, 85, 99, 0.2)',
                  },
                  ticks: {
                    font: {
                      size: 11
                    },
                    padding: 8,
                    color: 'rgba(156, 163, 175, 0.8)',
                  }
                },
                y1: {
                  beginAtZero: true,
                  position: 'right',
                  max: 100,
                  grid: {
                    drawBorder: false,
                    display: false,
                  },
                  ticks: {
                    font: {
                      size: 11
                    },
                    callback: function(value) {
                      return value + '%';
                    },
                    padding: 8,
                    color: 'rgba(139, 92, 246, 0.8)',
                  }
                },
                x: {
                  grid: {
                    drawBorder: false,
                    display: false,
                  },
                  ticks: {
                    font: {
                      size: 11
                    },
                    padding: 5,
                    color: 'rgba(156, 163, 175, 0.8)',
                    maxRotation: 30,
                    minRotation: 0
                  }
                }
              },
              plugins: {
                legend: {
                  display: false
                },
                tooltip: {
                  backgroundColor: 'rgba(17, 24, 39, 0.8)',
                  titleFont: {
                    size: 13,
                    weight: 'bold'
                  },
                  bodyFont: {
                    size: 12
                  },
                  padding: 12,
                  cornerRadius: 8,
                  bodySpacing: 6,
                  usePointStyle: true,
                  borderColor: 'rgba(255, 255, 255, 0.2)',
                  borderWidth: 1,
                  boxPadding: 4,
                  callbacks: {
                    labelPointStyle: function(context) {
                      return {
                        pointStyle: 'circle',
                        rotation: 0
                      };
                    },
                    label: function(context) {
                      let label = context.dataset.label || '';
                      if (label) {
                        label += ': ';
                      }
                      if (context.dataset.yAxisID === 'y1') {
                        label += context.parsed.y + '%';
                      } else {
                        label += context.parsed.y;
                      }
                      return label;
                    }
                  }
                }
              }
            }
          });
          
          return trendChart;
        };
        
        // สร้างกราฟเริ่มต้น
        let trendChart = createTrendChart();
        
        // ฟังก์ชันอัพเดทกราฟเมื่อเปลี่ยนช่วงเวลา
        function updateChart(period) {
          // ในอนาคตจะเพิ่มการเรียก API เพื่อดึงข้อมูลตามช่วงเวลา
          // สำหรับตอนนี้ให้แสดง loading ก่อน
          const chartLoading = document.getElementById('chartLoading');
          if (chartLoading) {
            chartLoading.style.display = 'flex';
            chartLoading.classList.remove('opacity-0');
          }
          
          // จำลองการโหลดข้อมูล
          setTimeout(() => {
            // อัพเดทช่วงวันที่ที่แสดง
            const dateRange = document.querySelector('.trend-date-range');
            if (dateRange) {
              dateRange.textContent = 'กำลังดูข้อมูล ' + period + ' วันล่าสุด';
            }
            
            // อัพเดทข้อมูลในกราฟ (ในสถานการณ์จริงข้อมูลจะมาจาก API)
            // อาจทำการกรองข้อมูลตามช่วงเวลาที่เลือก
            
            // ซ่อน loading
            if (chartLoading) {
              chartLoading.classList.add('opacity-0');
              setTimeout(() => chartLoading.style.display = 'none', 500);
            }
          }, 1000);
        }
      });
    </script>
    <!-- End: Advanced Test Trend Analysis -->

    <!-- Add custom animation and style to head -->
    <style>
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-5px); }
        100% { transform: translateY(0px); }
      }
      
      @keyframes float-delayed {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-3px); }
        100% { transform: translateY(0px); }
      }
      
      @keyframes float-slow {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-2px); }
        100% { transform: translateY(0px); }
      }
      
      .animate-float {
        animation: float 4s ease-in-out infinite;
      }
      
      .animate-float-delayed {
        animation: float-delayed 3s ease-in-out infinite;
        animation-delay: 1s;
      }
      
      .animate-float-slow {
        animation: float-slow 5s ease-in-out infinite;
        animation-delay: 0.5s;
      }
      
      .circle-animation {
        animation: progress 1.5s ease-out forwards;
      }
      
      .bar-animation {
        animation: grow 1.5s ease-out forwards;
      }
      
      .trend-path {
        animation: drawPath 2s ease-out forwards;
      }
      
      @keyframes progress {
        from { stroke-dashoffset: 100; }
        to { stroke-dashoffset: 25; }
      }
      
      @keyframes grow {
        from { width: 0%; }
        to { width: var(--target-width, 100%); }
      }
      
      @keyframes drawPath {
        to {
          stroke-dashoffset: 0;
        }
      }
      
      .neon-text {
        text-shadow: 0 0 8px rgba(131, 94, 251, 0.4);
      }
      
      /* Pattern grid background */
      .bg-pattern-grid {
        background-image: radial-gradient(rgba(255, 255, 255, 0.1) 1px, transparent 1px);
        background-size: 20px 20px;
      }
    </style>
    </div>
  </main>

  <!-- Core JavaScript -->
  <script>
<!-- Script สำหรับปุ่มเปิด/ปิด Fullscreen Mode รองรับทุก Browser -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const fullscreenButton = document.getElementById('fullscreen-button');
    if (fullscreenButton) {
      fullscreenButton.addEventListener('click', function() {
        if (!document.fullscreenElement &&
            !document.mozFullScreenElement &&
            !document.webkitFullscreenElement && 
            !document.msFullscreenElement) {
          
          if (document.documentElement.requestFullscreen) {
            document.documentElement.requestFullscreen();
          } else if (document.documentElement.mozRequestFullScreen) {
            document.documentElement.mozRequestFullScreen();
          } else if (document.documentElement.webkitRequestFullscreen) {
            document.documentElement.webkitRequestFullscreen();
          } else if (document.documentElement.msRequestFullscreen) {
            document.documentElement.msRequestFullscreen();
          }
        } else {
          if (document.exitFullscreen) {
            document.exitFullscreen();
          } else if (document.mozCancelFullScreen) {
            document.mozCancelFullScreen();
          } else if (document.webkitExitFullscreen) { 
            document.webkitExitFullscreen();
          } else if (document.msExitFullscreen) {
            document.msExitFullscreen();
          }
        }
      });
    }
  });
</script>

<!-- Animation นับเลขแบบนับขึ้น (Count Up) ก่อนปิด tag body -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const animatedElements = new Set();
    
    function animateValue(element, start, end, duration) {
      if (animatedElements.has(element)) return;
      
      let startTimestamp = null;
      const easeOutQuart = t => 1 - Math.pow(1 - t, 4);
      
      const step = (timestamp) => {
        if (!startTimestamp) startTimestamp = timestamp;
        const progress = Math.min((timestamp - startTimestamp) / duration, 1);
        const easedProgress = easeOutQuart(progress);
        
        const isProgressElement = element.closest('#progress-text') || 
                                element.getAttribute('data-type') === 'progress-rate';
        
        let value;
        if (isProgressElement) {
          value = (easedProgress * (end - start) + start).toFixed(2);
        } else {
          value = Math.round(easedProgress * (end - start) + start);
        }
        
        element.textContent = value + (isProgressElement ? '%' : '');
        
        element.style.transform = `scale(${1 + (1 - easedProgress) * 0.1})`;
        element.style.opacity = Math.min(1, easedProgress * 2);
        
        if (progress < 1) {
          window.requestAnimationFrame(step);
        } else {
          if (isProgressElement) {
            element.textContent = end.toFixed(2) + '%';
          } else {
            element.textContent = Math.round(end) + (element.dataset.suffix || '');
          }
          element.style.transform = 'scale(1)';
          element.style.opacity = '1';
          animatedElements.add(element);
        }
      };
      
      window.requestAnimationFrame(step);
    }
    
    document.querySelectorAll('.count-animation').forEach(el => {
      const finalValue = parseFloat(el.getAttribute('data-count'));
      if (!isNaN(finalValue)) {
        animateValue(el, 0, finalValue, 1500);
      }
    });
  });
</script>

<!--Bar Progress Animation Overall Completion Progress -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    const targetProgress = parseFloat(progressBar.dataset.progress);
    
    let currentProgress = 0;
    const duration = 1500;
    const startTime = performance.now();
    
    function animate(currentTime) {
      const elapsed = currentTime - startTime;
      const progress = Math.min(elapsed / duration, 1);
      
      const easeOutQuart = 1 - Math.pow(1 - progress, 4);
      currentProgress = easeOutQuart * targetProgress;
      
      progressBar.style.width = `${currentProgress}%`;
      progressText.textContent = `${currentProgress.toFixed(2)}%`;
      
      if (progress < 1) {
        requestAnimationFrame(animate);
      } else {
        progressText.textContent = `${targetProgress.toFixed(2)}%`;
      }
    }
    
    requestAnimationFrame(animate);
  });
</script>

<script>
  // ====== Sidebar Toggle ======
  document.addEventListener('DOMContentLoaded', function() {
    const sidebarToggle = document.getElementById('sidebar-toggle');
    const sidebar = document.getElementById('sidebar');
    const sidebarOverlay = document.querySelector('.sidebar-overlay');
    const mainContent = document.getElementById('mainContent');
    
    // Update sidebar margin and main content
    const updateLayout = () => {
      if (!sidebar.classList.contains('-translate-x-full')) {
        // When sidebar is visible
        mainContent.classList.add('md:ml-72');
        mainContent.classList.add('md:w-[calc(100%-288px)]');
        document.body.style.overflow = 'hidden'; // Prevent body scroll when sidebar is open
        sidebarOverlay.classList.remove('hidden');
      } else {
        // When sidebar is hidden
        mainContent.classList.remove('md:ml-72');
        mainContent.classList.remove('md:w-[calc(100%-288px)]');
        document.body.style.overflow = ''; // Restore body scroll
        sidebarOverlay.classList.add('hidden');
      }
    };
    
    // Toggle sidebar
    const toggleSidebar = () => {
      sidebar.classList.toggle('-translate-x-full');
      updateLayout();
    };
    
    // Close sidebar
    const closeSidebar = () => {
      sidebar.classList.add('-translate-x-full');
      updateLayout();
    };
    
    // Add event listener for toggle button
    sidebarToggle.addEventListener('click', (e) => {
      e.stopPropagation(); // Prevent event bubbling to document
      toggleSidebar();
    });
    
    // Add event listener for overlay click (closes sidebar)
    sidebarOverlay.addEventListener('click', closeSidebar);
    
    // Handle sidebar click outside
    document.addEventListener('click', (e) => {
      // Close sidebar if click is outside sidebar and toggle button
      if (!sidebar.contains(e.target) && !sidebarToggle.contains(e.target) && 
          !sidebar.classList.contains('-translate-x-full')) {
        closeSidebar();
      }
    });
    
    // Prevent sidebar click propagation
    sidebar.addEventListener('click', (e) => {
      e.stopPropagation();
    });
    
    // Handle responsive sidebar behavior
    window.addEventListener('resize', () => {
      if (window.innerWidth >= 768) {
        // For desktop view, show sidebar
        sidebar.classList.remove('-translate-x-full');
        sidebarOverlay.classList.add('hidden'); // Hide overlay on desktop
        mainContent.classList.add('md:ml-72');
        mainContent.classList.add('md:w-[calc(100%-288px)]');
      } else {
        // For mobile view, hide sidebar
        sidebar.classList.add('-translate-x-full');
        updateLayout();
      }
    });
    
    // Initial setup
    if (window.innerWidth < 768) {
      // Mobile view: hide sidebar
      sidebar.classList.add('-translate-x-full');
      updateLayout();
    } else {
      // Desktop view: show sidebar
      sidebar.classList.remove('-translate-x-full');
      mainContent.classList.add('md:ml-72');
      mainContent.classList.add('md:w-[calc(100%-288px)]');
      sidebarOverlay.classList.add('hidden');
    }
    
    // Handle dropdown menu toggle
    if (submenu.classList.contains('max-h-0')) {
      submenu.classList.remove('max-h-0');
      submenu.classList.add('max-h-screen');
      arrow.classList.add('rotate-90');
    } else {
      submenu.classList.add('max-h-0');
      submenu.classList.remove('max-h-screen');
      arrow.classList.remove('rotate-90');
    }
    
    // Initialize sidebar progress bar animation
    updateSidebarProgressBar();
    
    // Initialize dashboard progress bar
    const progressBar = document.getElementById('progress-bar');
    if (progressBar) {
      const progressPercent = '81';
      progressBar.style.width = progressPercent + '%';
    }
    
    // Initialize navigation menu with animations
    setTimeout(() => {
      // Setup Navigation Menu
      setupNavigationMenu();
      
      if (typeof animateCenterPercent === 'function') animateCenterPercent();
      if (typeof animateProgressBars === 'function') animateProgressBars();
      if (typeof animateCoverageBar === 'function') animateCoverageBar();
      
      // Setup smooth scroll for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          
          const targetId = this.getAttribute('href');
          if (targetId === "#") return; // Skip empty anchors
          
          const targetElement = document.querySelector(targetId);
          if (targetElement) {
            targetElement.scrollIntoView({
              behavior: 'smooth',
              block: 'start'
            });
            
            // Close sidebar on mobile after navigation
            if (window.innerWidth < 768) {
              closeSidebar();
            }
          }
        });
      });
    }, 300);
  });
  
  // ====== Sidebar Dropdown ======
  document.querySelectorAll('.sidebar-dropdown-toggle').forEach(button => {
    button.addEventListener('click', () => {
      const submenu = button.nextElementSibling;
      const arrow = button.querySelector('.sidebar-arrow');
      
      submenu.classList.toggle('hidden');
      submenu.classList.toggle('max-h-0');
      submenu.classList.toggle('max-h-screen');
      
      arrow.classList.toggle('rotate-90');
    });
  });
  document.querySelectorAll('.sidebar-submenu').forEach(submenu => {
    submenu.classList.add('hidden', 'max-h-0', 'overflow-hidden', 'transition-[max-height]', 'duration-300');
  });

  // ====== Dropdown (Popper) ======
  const popperInstance = {};
  document.querySelectorAll('.dropdown').forEach((item, index) => {
    const toggle = item.querySelector('.dropdown-toggle');
    const menu = item.querySelector('.dropdown-menu');
    const popperId = 'popper-' + index;
    menu.dataset.popperId = popperId; 

    popperInstance[popperId] = Popper.createPopper(toggle, menu, {
      placement: 'bottom-end',
      modifiers: [
        { name: 'offset', options: { offset: [0, 8] } },
        { name: 'preventOverflow', options: { padding: 24 } },
      ],
    });
  });

  document.addEventListener('click', (e) => {
    const toggle = e.target.closest('.dropdown-toggle');
    const menu = e.target.closest('.dropdown-menu');
    if (toggle) {
      const menuEl = toggle.closest('.dropdown').querySelector('.dropdown-menu');
      const popperId = menuEl.dataset.popperId;
      if (menuEl.classList.contains('hidden')) {
        hideAllDropdowns();
        menuEl.classList.remove('hidden');
        showPopper(popperId);
      } else {
        menuEl.classList.add('hidden');
        hidePopper(popperId);
      }
    } else if (!menu) {
      hideAllDropdowns();
    }
  });
  function hideAllDropdowns() {
    document.querySelectorAll('.dropdown-menu').forEach((item) => {
      item.classList.add('hidden');
    });
  }
  function showPopper(popperId) {
    popperInstance[popperId].setOptions((options) => ({
      ...options,
      modifiers: [...options.modifiers, { name: 'eventListeners', enabled: true }],
    }));
    popperInstance[popperId].update();
  }
  function hidePopper(popperId) {
    popperInstance[popperId].setOptions((options) => ({
      ...options,
      modifiers: [...options.modifiers, { name: 'eventListeners', enabled: false }],
    }));
  }

  // ====== Tab Switch (Notifications / Messages) ======
  document.querySelectorAll('[data-tab]').forEach((tabBtn) => {
    tabBtn.addEventListener('click', (e) => {
      e.preventDefault();
      const tabName = tabBtn.dataset.tab;
      const pageName = tabBtn.dataset.tabPage;
      document.querySelectorAll(`[data-tab-for="${tabName}"]`).forEach((p) => {
        p.classList.add('hidden');
      });
      document.querySelectorAll(`[data-tab="${tabName}"]`).forEach((b) => {
        b.classList.remove('active');
      });
      const target = document.querySelector(`[data-tab-for="${tabName}"][data-page="${pageName}"]`);
      target.classList.remove('hidden');
      tabBtn.classList.add('active');
    });
  });

  // Line Chart (Trend Analysis)
  const ctxLineChart = document.getElementById('order-chart').getContext('2d');
  
  // ????????????? gradient
  const blueGradient = ctxLineChart.createLinearGradient(0, 0, 0, 400);
  blueGradient.addColorStop(0, 'rgba(59, 130, 246, 0.5)');
  blueGradient.addColorStop(1, 'rgba(59, 130, 246, 0.0)');
  
  const redGradient = ctxLineChart.createLinearGradient(0, 0, 0, 400);
  redGradient.addColorStop(0, 'rgba(244, 63, 94, 0.5)');
  redGradient.addColorStop(1, 'rgba(244, 63, 94, 0.0)');
  
  const greenGradient = ctxLineChart.createLinearGradient(0, 0, 0, 400);
  greenGradient.addColorStop(0, 'rgba(16, 185, 129, 0.5)');
  greenGradient.addColorStop(1, 'rgba(16, 185, 129, 0.0)');
  
  // ????? Chart
  const lineChart = new Chart(ctxLineChart, {
    type: 'line',
    data: {
      labels: JSON.parse('["2025-02-03", "2025-02-10", "2025-02-17", "2025-02-24", "2025-03-03", "2025-03-10"]'), 
      datasets: [
        {
          label: 'Test Cases Executed',
          data: JSON.parse('[45, 62, 58, 45, 30, 18]'),
          borderColor: 'rgb(59, 130, 246)',
          backgroundColor: blueGradient,
          borderWidth: 2,
          pointBackgroundColor: 'rgb(255, 255, 255)',
          pointBorderColor: 'rgb(59, 130, 246)',
          pointBorderWidth: 2,
          pointRadius: 4,
          pointHoverRadius: 6,
          pointHoverBackgroundColor: 'rgb(59, 130, 246)',
          pointHoverBorderColor: 'rgb(255, 255, 255)',
          tension: 0.3,
          fill: true,
        },
        {
          label: 'Defects Opened',
          data: JSON.parse('[2, 3, 4, 3, 2, 0]'),
          borderColor: 'rgb(244, 63, 94)',
          backgroundColor: redGradient,
          borderWidth: 2,
          pointBackgroundColor: 'rgb(255, 255, 255)',
          pointBorderColor: 'rgb(244, 63, 94)',
          pointBorderWidth: 2,
          pointRadius: 4,
          pointHoverRadius: 6,
          pointHoverBackgroundColor: 'rgb(244, 63, 94)',
          pointHoverBorderColor: 'rgb(255, 255, 255)',
          tension: 0.3,
          fill: true,
        },
        {
          label: 'Defects Closed',
          data: JSON.parse('[0, 1, 1, 1, 2, 3]'),
          borderColor: 'rgb(16, 185, 129)',
          backgroundColor: greenGradient,
          borderWidth: 2,
          pointBackgroundColor: 'rgb(255, 255, 255)',
          pointBorderColor: 'rgb(16, 185, 129)',
          pointBorderWidth: 2, 
          pointRadius: 4,
          pointHoverRadius: 6,
          pointHoverBackgroundColor: 'rgb(16, 185, 129)',
          pointHoverBorderColor: 'rgb(255, 255, 255)',
          tension: 0.3,
          fill: true,
        },
      ]
    },
    options: { 
      responsive: true, 
      maintainAspectRatio: false,
      interaction: {
        mode: 'index',
        intersect: false,
      },
      hover: {
        mode: 'nearest',
        intersect: true
      },
      animations: {
        tension: {
          duration: 1000,
          easing: 'linear',
          from: 0.4,
          to: 0.3,
          loop: false
        }
      },
      scales: {
        y: {
          beginAtZero: true,
          position: 'left',
          grid: {
            drawBorder: false,
            color: 'rgba(200, 200, 200, 0.2)',
          },
          ticks: {
            font: {
              size: 11
            },
            padding: 8,
            color: 'rgba(100, 100, 100, 0.8)',
          }
        },
        x: {
          grid: {
            drawBorder: false,
            display: false,
          },
          ticks: {
            font: {
              size: 11
            },
            padding: 5,
            color: 'rgba(100, 100, 100, 0.8)',
            maxRotation: 30,
            minRotation: 0
          }
        }
      },
      plugins: {
        legend: {
          position: 'top',
          align: 'end',
          labels: {
            boxWidth: 12,
            usePointStyle: true,
            pointStyle: 'circle',
            padding: 15,
            font: {
              size: 12
            }
          }
        },
        tooltip: {
          backgroundColor: 'rgba(0, 0, 0, 0.8)',
          titleFont: {
            size: 13,
            weight: 'bold'
          },
          bodyFont: {
            size: 12
          },
          padding: 12,
          cornerRadius: 8,
          bodySpacing: 6,
          usePointStyle: true,
          borderColor: 'rgba(255, 255, 255, 0.3)',
          borderWidth: 1,
          boxPadding: 4,
          callbacks: {
            labelPointStyle: function(context) {
              return {
                pointStyle: 'circle',
                rotation: 0
              };
            }
          }
        }
      }
    }
  });
  
  // Animate sections on scroll
  const animateOnScroll = () => {
    const chartSection = document.querySelector('.lazy-chart');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          lineChart.data.datasets.forEach((dataset, index) => {
            setTimeout(() => {
              dataset.hidden = false;
              lineChart.update();
            }, index * 300);
          });
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.2 });
    
    if (chartSection) {
      lineChart.data.datasets.forEach(dataset => {
        dataset.hidden = true;
      });
      lineChart.update();
      observer.observe(chartSection);
    }
  };
  
  // Initialize animation on DOM content loaded
  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', animateOnScroll);
  } else {
    animateOnScroll();
  }

  // Example: Doughnut Chart
  const ctxDoughnut = document.getElementById('test-status-chart').getContext('2d');
  
  // สร้าง Doughnut Chart แสดงสถานะของ Test Cases
  const doughnutChart = new Chart(ctxDoughnut, {
    type: 'doughnut',
    data: {
      labels: ['Passed', 'Failed', 'Blocked', 'In Progress'],
      datasets: [{
        data: [50, 30, 15, 25], // ข้อมูลแต่ละสถานะ
        backgroundColor: [
          'rgb(16, 185, 129)', // Passed
          'rgb(244, 63, 94)',  // Failed
          'rgb(249, 115, 22)', // Blocked
          'rgb(59, 130, 246)'  // In Progress
        ],
        borderColor: 'white',
        borderWidth: 2,
        hoverBorderWidth: 0,
        hoverOffset: 10,
        borderRadius: 4,
      }]
    },
    options: { 
      responsive: true, 
      maintainAspectRatio: false,
      cutout: '75%', // ขนาดรูตรงกลางโดนัท
      plugins: {
        legend: {
          display: false // ปิดการแสดง legend
        },
        tooltip: {
          backgroundColor: 'rgba(0, 0, 0, 0.8)',
          titleFont: {
            size: 13,
            weight: 'bold'
          },
          bodyFont: {
            size: 12
          },
          padding: 12,
          cornerRadius: 8,
          usePointStyle: true,
          callbacks: {
            label: function(context) { // ปรับแต่งข้อความใน Tooltip
              const value = context.raw || 0;
              const index = context.dataIndex;
              if (index === 0) return 'Passed: ' + value + ' (42%)';
              if (index === 1) return 'Failed: ' + value + ' (25%)';
              if (index === 2) return 'Blocked: ' + value + ' (13%)';
              return 'In Progress: ' + value + ' (20%)';
            }
          }
        }
      },
      animation: {
        animateScale: true,
        animateRotate: true,
        duration: 2000,
        easing: 'easeOutQuart'
      }
    }
  });

  
  // Animate center text
  const animateCenterPercent = () => {
    const centerText = document.getElementById('chart-center-percent');
    
    if (centerText) {
      // Set initial text
      centerText.textContent = '0%';
      
      // Simple timeout-based animation
      setTimeout(() => {
        centerText.textContent = '63%'; // ????????
      }, 1500);
    }
  };
  
  // Animate progress bars
  const animateProgressBars = () => {
    setTimeout(() => {
      const passBar = document.getElementById('pass-bar');
      const failBar = document.getElementById('fail-bar');
      const blockedBar = document.getElementById('blocked-bar');
      const progressBarChart = document.getElementById('progress-bar-chart');
      
      if (passBar) passBar.style.width = '50%'; // ????????
      if (failBar) failBar.style.width = '25%'; // ????????
      if (blockedBar) blockedBar.style.width = '12%'; // ????????
      if (progressBarChart) progressBarChart.style.width = '13%'; // ????????
      
      // Update counts in the DOM with ????????
      const passCount = document.getElementById('pass-count');
      const failCount = document.getElementById('fail-count');
      const blockedCount = document.getElementById('blocked-count');
      const progressCount = document.getElementById('progress-count');
      
      if (passCount) passCount.textContent = '50';
      if (failCount) failCount.textContent = '30';
      if (blockedCount) blockedCount.textContent = '15';
      if (progressCount) progressCount.textContent = '25';
    }, 300);
  };
  
  // Example: Coverage bar with animation
  const animateCoverageBar = () => {
    const coverageValueText = document.getElementById('coverageValueText');
    const coverageBar = document.getElementById('coverageBar');
    
    if (coverageValueText && coverageBar) {
      coverageValueText.textContent = '0%';
      coverageBar.style.width = '0%';
      
      setTimeout(() => {
        const staticCoverageVal = 75; // ????????
        coverageValueText.textContent = staticCoverageVal + '%';
        coverageBar.style.width = staticCoverageVal + '%';
      }, 500);
    }
  };
  
  // Initialize animations on DOM content loaded
  document.addEventListener('DOMContentLoaded', function() {
    // Set progress bar width from template variable
    const progressBar = document.getElementById('progress-bar');
    if (progressBar) {
      const progressPercent = '81';
      progressBar.style.width = progressPercent + '%';
    }
    
    // Start chart animations
    animateCenterPercent();
    animateProgressBars();
    animateCoverageBar();
  });

  // Add shimmer effect CSS
  const style = document.createElement('style');
  style.textContent = `
    @keyframes shimmer {
      0% { transform: translateX(-100%); }
      100% { transform: translateX(100%); }
    }
    .shimmer {
      animation: shimmer 2s infinite linear;
    }
  `;
  document.head.appendChild(style);

  // อัปเดต Progress bar ที่ sidebar ตามค่าเปอร์เซ็นต์ที่กำหนด
  function updateSidebarProgressBar() {
    const progressValue = '81';
    const progressBarInner = document.querySelector('.progress-bar-inner');
    const progressPercentValue = document.getElementById('progress-percent-value');
    
    if (progressBarInner && progressPercentValue) {
      progressBarInner.style.width = progressValue + '%';
      progressPercentValue.textContent = progressValue + '%';
    }
  }


  document.addEventListener('DOMContentLoaded', function() {
  // Initialize progress bar on sidebar
  updateSidebarProgressBar();

  // Initialize the navigation menu and set active page
  setupNavigationMenu();
});

  // Function to setup navigation menu interactions
  function setupNavigationMenu() {
    const menuItems = document.querySelectorAll('.menu-item');
    const subMenuItems = document.querySelectorAll('.submenu-item');
    const currentPage = window.location.hash || '#dashboard';

    // Function to update the active menu based on the current page
    const setActiveMenu = (targetPage) => {
      // Reset styling for all menu items
      menuItems.forEach(item => {
        const link = item.querySelector('a') || item.querySelector('button');
        if (link) {
          link.classList.remove('text-white', 'bg-gradient-to-r', 'from-red-500/20', 'to-transparent', 'backdrop-blur-sm');
          link.classList.add('text-slate-300');
        }
        // Remove active class
        item.classList.remove('active');
      });

      // Reset styling for submenu items
      subMenuItems.forEach(item => {
        item.classList.remove('bg-slate-700/50', 'text-white', 'active');
        item.classList.add('text-slate-400');
      });

      // Variables to store active menu and submenu items
      let activeMenu = null;
      let activeSubmenu = null;

      if (targetPage.includes('/')) {
        // Split URL for subpages
        const parts = targetPage.split('/');
        const mainPage = '#' + parts[0];
        const subPage = parts[1];

        // Find active main menu
        menuItems.forEach(item => {
          if (item.dataset.page === parts[0]) {
            activeMenu = item;
          }
        });

        // Find active submenu
        subMenuItems.forEach(item => {
          if (item.dataset.subpage === subPage || item.getAttribute('href') === targetPage) {
            activeSubmenu = item;
          }
        });
      } else {
        // Identify active main menu item without subpages
        menuItems.forEach(item => {
          if ('#' + item.dataset.page === targetPage) {
            activeMenu = item;
          }
        });
      }

      // Apply styles to active menu
      if (activeMenu) {
        const link = activeMenu.querySelector('a') || activeMenu.querySelector('button');
        if (link) {
          link.classList.remove('text-slate-300');
          link.classList.add('text-white');

          // Mark menu as active
          activeMenu.classList.add('active');

          // Apply special style if dashboard
          if (activeMenu.dataset.page === 'dashboard') {
            link.classList.add('bg-gradient-to-r', 'from-red-500/20', 'to-transparent', 'backdrop-blur-sm');
          } else {
            link.classList.add('bg-slate-700/50');
          }

          // Expand dropdown and activate submenu if applicable
          if (activeSubmenu && activeMenu.dataset.page === 'modules') {
            const submenu = activeMenu.querySelector('.sidebar-submenu');
            const arrow = activeMenu.querySelector('.sidebar-arrow');
            if (submenu && arrow) {
              submenu.classList.remove('max-h-0');
              submenu.classList.add('max-h-screen');
              arrow.classList.add('rotate-90');
            }

            // Activate submenu item
            activeSubmenu.classList.remove('text-slate-400');
            activeSubmenu.classList.add('bg-slate-700/50', 'text-white', 'active');
          }
        }
      }

      // Update breadcrumb text based on selected page
      updatePageContent(targetPage);
    };

    // Function to update breadcrumb based on current page
    const updatePageContent = (targetPage) => {
      const breadcrumbText = document.querySelector('.breadcrumb-text');
      if (!breadcrumbText) return;

      let pageName = 'Dashboard';

      // Determine breadcrumb text based on URL
      if (targetPage.includes('/')) {
        const parts = targetPage.split('/');
        const subPage = parts[1];

        // Identify specific subpage names
        if (subPage === 'auth') pageName = 'Authentication Module';
        else if (subPage === 'payment') pageName = 'Payment Module';
        else if (subPage === 'profile') pageName = 'User Profile Module';
      } else {
        // Main page names
        if (targetPage === '#defects') pageName = 'Defects';
        else if (targetPage === '#modules') pageName = 'Modules';
        else if (targetPage === '#reports') pageName = 'Reports';
        else if (targetPage === '#settings') pageName = 'Settings';
      }

      // Set breadcrumb text
      breadcrumbText.textContent = pageName;
    };

    // Attach click event listeners to menu items
    menuItems.forEach(item => {
      const link = item.querySelector('a');
      if (link) {
        link.addEventListener('click', (e) => {
          const targetPage = link.getAttribute('href');
          setActiveMenu(targetPage);

          // Close sidebar on small screens
          if (window.innerWidth < 768) {
            closeSidebar();
          }
        });
      }
    });

    // Attach click event listeners to submenu items
    subMenuItems.forEach(item => {
      item.addEventListener('click', (e) => {
        const targetPage = item.getAttribute('href');
        setActiveMenu(targetPage);

        // Close sidebar on small screens
        if (window.innerWidth < 768) {
          closeSidebar();
        }
      });
    });

    // Initialize menu state based on current URL
    setActiveMenu(currentPage);

    // Update active menu on URL hash change
    window.addEventListener('hashchange', () => {
      setActiveMenu(window.location.hash || '#dashboard');
    });
  }

  document.addEventListener('DOMContentLoaded', function() {
    // Set progress bars width from data attributes
    const progressBar = document.getElementById('progress-bar');
    if (progressBar) {
      const progress = progressBar.getAttribute('data-progress');
      progressBar.style.width = progress + '%';
    }
    
    // Set test coverage bar
    const coverageBars = document.querySelectorAll('[data-coverage]');
    coverageBars.forEach(bar => {
      const coverage = bar.getAttribute('data-coverage');
      bar.style.width = coverage + '%';
    });
    
    // Set defect density bar
    const defectDensityBar = document.getElementById('defect-density-bar');
    if (defectDensityBar) {
      const density = defectDensityBar.getAttribute('data-density');
      defectDensityBar.style.width = density + '%';
    }
  });

</script>

<!-- Popper & Chart JS -->
<script src="https://unpkg.com/@popperjs/core@2"></script>
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<!-- Include JavaScript files -->
<script src="assets/js/main.js"></script>
<script src="assets/js/charts.js"></script>

<!-- Custom scripts specific to this page can stay here -->
<script>
  document.addEventListener('DOMContentLoaded', function() {
    // Initialize any remaining components not covered in the main.js file
    initCustomComponents();
  });
  
  function initCustomComponents() {
    // Initialize tooltips
    const tooltips = document.querySelectorAll('[data-tooltip]');
    
    tooltips.forEach(tooltip => {
      tooltip.addEventListener('mouseenter', function() {
        const tooltipText = this.getAttribute('data-tooltip');
        const tooltipElem = document.createElement('div');
        tooltipElem.className = 'tooltip';
        tooltipElem.textContent = tooltipText;
        document.body.appendChild(tooltipElem);
        
        const rect = this.getBoundingClientRect();
        tooltipElem.style.top = rect.bottom + 10 + 'px';
        tooltipElem.style.left = rect.left + (rect.width / 2) - (tooltipElem.offsetWidth / 2) + 'px';
        tooltipElem.style.opacity = '1';
      });
      
      tooltip.addEventListener('mouseleave', function() {
        const tooltips = document.querySelectorAll('.tooltip');
        tooltips.forEach(t => t.remove());
      });
    });
    
    // Initialize notification close buttons
    const notificationCloseButtons = document.querySelectorAll('.notification-close');
    
    notificationCloseButtons.forEach(button => {
      button.addEventListener('click', function() {
        const notification = this.closest('.notification');
        notification.classList.add('fade-out');
        setTimeout(() => {
          notification.remove();
        }, 300);
      });
    });
  }
</script>

  </script>
</body>
</html> 